import{u as e,r as t,j as s,X as a,M as r,L as i,H as n,B as l,S as o,a as c,b as d,U as h,C as m,c as x,R as u,d as p,e as g,f as b,g as f,h as y,i as v,P as w,k as j,l as k,A as N,m as C,T as S,G as T,n as P,V as I,o as M,p as F,q as A,s as D,t as E,v as L,w as R,Q as $,x as H,y as O,z,D as U,E as q,F as B,W,I as Q,J as V,K as G,N as _,O as J,Z as Y,Y as Z,_ as K,$ as X,a0 as ee,a1 as te,a2 as se,a3 as ae,a4 as re,a5 as ie,a6 as ne,a7 as le,a8 as oe,a9 as ce,aa as de,ab as he,ac as me,ad as xe,ae as ue,af as pe}from"./react-vendor-DUSrwrz2.js";import{m as ge,A as be}from"./vendor-mvPEyPB5.js";import{G as fe,D as ye,B as ve,S as we,M as je,a as ke,b as Ne,A as Ce,c as Se,d as Te,L as Pe,e as Ie,Q as Me,V as Fe,f as Ae,g as De}from"./three-vendor-DubhnhXN.js";const Ee={Home:f,Hand:n,Mic:b,UserPlus:g,Languages:p},Le=({menuItems:p,theme:g="light",onThemeToggle:b,onOpenSettings:y})=>{const v=e(),[w,j]=t.useState(!1),[k,N]=t.useState(!1),[C,S]=t.useState(!1),T=t.useMemo(()=>((e,t)=>{if("/"===e)return null;const s=[];s.push({title:"ä¸»é¡µ",path:"/",isLast:!1});const a=t.find(t=>t.path===e);return a?s.push({title:a.label,path:a.path,isLast:!0}):"/settings"===e?s.push({title:"è®¾ç½®",path:"/settings",isLast:!0}):"/profile"===e&&s.push({title:"ä¸ªäººèµ„æ–™",path:"/profile",isLast:!0}),s.length<=1?null:s})(v.pathname,p),[v.pathname,p]),P=e=>{const t=Ee[e]||f;return s.jsx(t,{className:"w-5 h-5"})},I=e=>v.pathname===e;return s.jsx("header",{className:"sticky top-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800 shadow-sm",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex items-center justify-between h-16 md:h-20",children:[s.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[s.jsx(ge.button,{whileTap:{scale:.9},onClick:()=>j(!w),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":w?"å…³é—­èœå•":"æ‰“å¼€èœå•",children:w?s.jsx(a,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):s.jsx(r,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})}),s.jsxs(i,{to:"/",className:"flex items-center space-x-2 md:space-x-3 group",children:[s.jsx(ge.div,{whileHover:{scale:1.05,rotate:5},whileTap:{scale:.95},className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow",children:s.jsx(n,{className:"w-6 h-6 md:w-7 md:h-7 text-white"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("h1",{className:"text-lg md:text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent group-hover:opacity-80 transition-opacity",children:"Sign AI"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"æ‰‹è¯­è¯†åˆ«ä¸äº¤äº’ç³»ç»Ÿ"})]})]})]}),s.jsx("nav",{className:"hidden xl:flex items-center space-x-1",children:p.map(e=>s.jsxs(i,{to:e.path,className:`\n                  relative flex items-center space-x-2 px-4 py-2.5 rounded-xl transition-all duration-200\n                  ${I(e.path)?"bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/40 dark:to-pink-900/40 text-purple-700 dark:text-purple-300 font-semibold shadow-sm":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800/50"}\n                `,children:[s.jsx("span",{className:"relative",children:P(e.icon)}),s.jsx("span",{className:"font-medium",children:e.label}),I(e.path)&&s.jsx(ge.div,{layoutId:"activeTab",className:"absolute inset-0 rounded-xl -z-10",transition:{type:"spring",bounce:.2,duration:.6}})]},e.id))}),s.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N(!k),className:"relative p-2 md:p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"é€šçŸ¥",children:[s.jsx(l,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),s.jsx(ge.span,{className:"absolute top-1.5 right-1.5 w-2.5 h-2.5 bg-gradient-to-br from-red-500 to-pink-500 rounded-full",animate:{scale:[1,1.2,1],opacity:[1,.7,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),s.jsx(be,{children:k&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>N(!1)}),s.jsxs(ge.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2},className:"absolute right-0 top-full mt-3 w-80 md:w-96 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50",children:[s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:"é€šçŸ¥"}),s.jsx("button",{onClick:()=>N(!1),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(a,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})}),s.jsx("div",{className:"max-h-80 overflow-y-auto p-4",children:s.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[s.jsx(l,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"text-sm",children:"æš‚æ— æ–°é€šçŸ¥"})]})}),s.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:s.jsx("button",{onClick:()=>N(!1),className:"w-full text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium transition-colors",children:"æŸ¥çœ‹å…¨éƒ¨é€šçŸ¥"})})]})]})})]}),s.jsx(ge.button,{whileHover:{scale:1.05,rotate:15},whileTap:{scale:.95},onClick:()=>{null==b||b(),navigator.vibrate&&navigator.vibrate(50)},className:"p-2 md:p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"dark"===g?"åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼":"åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼","aria-label":"dark"===g?"åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼":"åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼",children:s.jsx(be,{mode:"wait",children:"dark"===g?s.jsx(ge.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:s.jsx(o,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})},"sun"):s.jsx(ge.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:s.jsx(c,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})},"moon")})}),s.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y,className:"hidden sm:flex p-2 md:p-2.5 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:"è®¾ç½®","aria-label":"è®¾ç½®",children:s.jsx(d,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsxs("div",{className:"relative",children:[s.jsxs(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>S(!C),className:"flex items-center space-x-2 p-1.5 md:p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"ç”¨æˆ·èœå•",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:s.jsx(h,{className:"w-4 h-4 text-white"})}),s.jsx(m,{className:"w-4 h-4 text-gray-500 dark:text-gray-400 transition-transform "+(C?"rotate-180":"")})]}),s.jsx(be,{children:C&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>S(!1)}),s.jsxs(ge.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-56 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50",children:[s.jsxs("div",{className:"p-2",children:[s.jsxs(i,{to:"/profile",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>S(!1),children:[s.jsx(h,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ä¸ªäººèµ„æ–™"})]}),s.jsxs(i,{to:"/settings",className:"flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>S(!1),children:[s.jsx(d,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ç³»ç»Ÿè®¾ç½®"})]})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-2",children:s.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-red-600 dark:text-red-400",onClick:()=>{S(!1)},children:[s.jsx(x,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"é€€å‡ºç™»å½•"})]})})]})]})})]})]})]}),T&&T.length>1&&s.jsx(ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"hidden md:flex items-center space-x-2 py-2 text-sm border-t border-gray-100 dark:border-gray-800",children:T.map((e,t)=>s.jsxs(u.Fragment,{children:[s.jsx(i,{to:e.path,className:`\n                    flex items-center space-x-1 hover:text-purple-600 dark:hover:text-purple-400 transition-colors\n                    ${e.isLast?"text-gray-900 dark:text-white font-medium":"text-gray-500 dark:text-gray-400"}\n                  `,children:e.title}),!e.isLast&&s.jsx(m,{className:"w-3 h-3 text-gray-400 rotate-[-90deg]"})]},e.path))}),s.jsx(be,{children:w&&s.jsx(ge.nav,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"lg:hidden pb-4",children:s.jsxs("div",{className:"flex flex-col space-y-2 pt-4 border-t border-gray-100 dark:border-gray-800",children:[p.map((e,t)=>s.jsx(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:s.jsxs(i,{to:e.path,onClick:()=>j(!1),className:`\n                        flex items-center space-x-3 px-4 py-3 rounded-xl transition-all duration-200\n                        ${I(e.path)?"bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/40 dark:to-pink-900/40 text-purple-700 dark:text-purple-300 font-medium":"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800"}\n                      `,children:[s.jsx("span",{children:P(e.icon)}),s.jsx("span",{className:"font-medium",children:e.label})]})},e.id)),s.jsx(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*p.length},children:s.jsxs("button",{onClick:()=>{null==y||y(),j(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[s.jsx(d,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"è®¾ç½®"})]})})]})})})]})})},Re=[{title:"äº§å“",links:[{label:"æ‰‹è¯­è¯†åˆ«",path:"/sign-recognition"},{label:"è¯­éŸ³å¤„ç†",path:"/voice-processing"},{label:"å£°éŸ³å…‹éš†",path:"/voice-cloning"},{label:"åŒå‘ç¿»è¯‘",path:"/translation"}]},{title:"èµ„æº",links:[{label:"ä½¿ç”¨æ–‡æ¡£",path:"/docs"},{label:"API å‚è€ƒ",path:"/api/docs"},{label:"æ•™ç¨‹",path:"/tutorials"},{label:"å¸¸è§é—®é¢˜",path:"/faq"}]},{title:"å…¬å¸",links:[{label:"å…³äºæˆ‘ä»¬",path:"/about"},{label:"è”ç³»æˆ‘ä»¬",path:"/contact"},{label:"åŠ å…¥æˆ‘ä»¬",path:"/careers"},{label:"åšå®¢",path:"/blog"}]},{title:"æ”¯æŒ",links:[{label:"å¸®åŠ©ä¸­å¿ƒ",path:"/help"},{label:"ç¤¾åŒºè®ºå›",path:"/community"},{label:"åé¦ˆå»ºè®®",path:"/feedback"},{label:"æœåŠ¡çŠ¶æ€",path:"/status"}]}],$e={github:T,twitter:S,linkedin:C,email:v},He=({socialLinks:e=[{platform:"github",url:"https://github.com",label:"GitHub"},{platform:"twitter",url:"https://twitter.com",label:"Twitter"},{platform:"linkedin",url:"https://linkedin.com",label:"LinkedIn"},{platform:"email",url:"mailto:contact@signai.com",label:"Email"}],contactInfo:a={email:"contact@signai.com",phone:"+86 400-123-4567",address:"ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºå¼ æ±Ÿé«˜ç§‘æŠ€å›­åŒº"},showBackToTop:r=!0})=>{const[n,l]=t.useState(!1),o=e=>{const t=$e[e]||T;return s.jsx(t,{className:"w-5 h-5"})},c=(e,t,s)=>{if(!["/","/sign-recognition","/voice-processing","/voice-cloning","/translation","/privacy","/terms","/cookies","/accessibility"].includes(t)){e.preventDefault();const a=t.replace("/","")||"home",r=document.getElementById(a);r?r.scrollIntoView({behavior:"smooth"}):alert(`"${s}" é¡µé¢æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼\n\næ‚¨å¯ä»¥ä½“éªŒä»¥ä¸‹åŠŸèƒ½ï¼š\n- æ‰‹è¯­è¯†åˆ«\n- è¯­éŸ³å¤„ç†\n- å£°éŸ³å…‹éš†\n- åŒå‘ç¿»è¯‘`)}};return s.jsxs("footer",{className:"bg-gradient-to-b from-gray-900 via-gray-900 to-gray-950 text-white",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 md:gap-12",children:[s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs(i,{to:"/",className:"flex items-center space-x-3 mb-4 group",children:[s.jsx(ge.div,{whileHover:{scale:1.05,rotate:5},className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-purple-500/50 transition-shadow",children:s.jsxs("svg",{className:"w-7 h-7 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M8 3l4 4 4-4",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M12 7v14",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M8 21h8",strokeLinecap:"round",strokeLinejoin:"round"})]})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Sign AI"}),s.jsx("p",{className:"text-xs text-gray-400",children:"è®©æ²Ÿé€šæ— å¤„ä¸åœ¨"})]})]}),s.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-6",children:"è‡´åŠ›äºé€šè¿‡äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œä¸ºå¬éšœäººå£«å’Œè¯­éšœäººå£«æä¾›æ›´ä¾¿æ·çš„æ²Ÿé€šæ–¹å¼ï¼Œæ¶ˆé™¤æ²Ÿé€šéšœç¢ï¼Œæ„å»ºæ— éšœç¢ç¤¾ä¼šã€‚"}),s.jsx("div",{className:"flex items-center space-x-3",children:e.map(e=>s.jsx(ge.a,{href:e.url,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1,y:-3},whileTap:{scale:.9},className:"w-10 h-10 bg-gray-800 hover:bg-gradient-to-br hover:from-purple-500 hover:to-pink-500 rounded-lg flex items-center justify-center transition-all duration-300","aria-label":e.label,title:e.label,children:s.jsx("span",{className:"text-gray-400 hover:text-white",children:o(e.platform)})},e.platform))})]}),Re.map((e,t)=>s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("h4",{className:"text-base font-semibold text-white mb-4 flex items-center group",children:[e.title,s.jsx(y,{className:"w-4 h-4 ml-2 text-purple-400 transition-transform duration-300 transform group-hover:rotate-90"})]}),s.jsx("ul",{className:"space-y-3",children:e.links.map(e=>s.jsx(ge.li,{whileHover:{x:5},transition:{type:"spring",stiffness:300},children:s.jsxs(i,{to:e.path,onClick:t=>c(t,e.path,e.label),className:"text-sm text-gray-400 hover:text-purple-400 dark:hover:text-purple-300 transition-colors duration-200 flex items-center group/link cursor-pointer active:scale-95",children:[s.jsx(y,{className:"w-3 h-3 mr-2 opacity-0 -ml-5 transition-all duration-200 group-hover/link:opacity-100 group-hover/link:ml-0 text-purple-400"}),s.jsx("span",{children:e.label})]})},e.path))})]},e.title)),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsxs("h4",{className:"text-base font-semibold text-white mb-4 flex items-center group",children:["è”ç³»æˆ‘ä»¬",s.jsx(y,{className:"w-4 h-4 ml-2 text-purple-400 transition-transform duration-300 transform group-hover:rotate-90"})]}),s.jsxs("ul",{className:"space-y-4",children:[a.email&&s.jsxs("li",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx(v,{className:"w-4 h-4 text-purple-400"})}),s.jsxs("a",{href:`mailto:${a.email}`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:"text-sm text-gray-400 hover:text-white transition-colors",children:[s.jsx("span",{className:"block font-medium text-white",children:"é‚®ç®±åœ°å€"}),s.jsx("span",{className:"text-purple-400",children:a.email})]})]}),a.phone&&s.jsxs("li",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx(w,{className:"w-4 h-4 text-purple-400"})}),s.jsxs("a",{href:`tel:${a.phone}`,className:"text-sm text-gray-400 hover:text-white transition-colors",children:[s.jsx("span",{className:"block font-medium text-white",children:"æœåŠ¡çƒ­çº¿"}),s.jsx("span",{className:"text-purple-400",children:a.phone})]})]}),a.address&&s.jsxs("li",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx(j,{className:"w-4 h-4 text-purple-400"})}),s.jsxs("div",{className:"text-sm text-gray-400 hover:text-white transition-colors",children:[s.jsx("span",{className:"block font-medium text-white",children:"å…¬å¸åœ°å€"}),s.jsx("span",{children:a.address})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"è®¢é˜…æˆ‘ä»¬çš„æœ€æ–°åŠ¨æ€"}),s.jsxs("div",{className:"flex",children:[s.jsx("input",{type:"email",placeholder:"è¾“å…¥æ‚¨çš„é‚®ç®±",className:"flex-1 px-4 py-2.5 bg-gray-800 border border-gray-700 rounded-l-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent placeholder-gray-500","aria-label":"é‚®ç®±åœ°å€"}),s.jsx(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-sm font-medium rounded-r-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-200",children:"è®¢é˜…"})]})]})]})]}),s.jsx("div",{className:"mt-12 mb-8",children:s.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-purple-500/50 to-transparent"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-3 sm:space-y-0",children:[s.jsxs("p",{className:"text-sm text-gray-400",children:["Â© ",(new Date).getFullYear()," Sign AI. ä¿ç•™æ‰€æœ‰æƒåˆ©"]}),s.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:s.jsxs("span",{className:"flex items-center",children:["Made with"," ",s.jsx(ge.span,{animate:{scale:[1,1.2,1],opacity:[1,.7,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:s.jsx(k,{className:"w-4 h-4 mx-1 text-red-500 fill-current"})}),"for everyone"]})})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-start sm:justify-end gap-4 md:gap-6 text-sm text-gray-400",children:[s.jsx(i,{to:"/privacy",onClick:e=>c(e,"/privacy","éšç§æ”¿ç­–"),className:"hover:text-purple-400 transition-colors cursor-pointer active:scale-95",children:"éšç§æ”¿ç­–"}),s.jsx(i,{to:"/terms",onClick:e=>c(e,"/terms","æœåŠ¡æ¡æ¬¾"),className:"hover:text-purple-400 transition-colors cursor-pointer active:scale-95",children:"æœåŠ¡æ¡æ¬¾"}),s.jsx(i,{to:"/cookies",onClick:e=>c(e,"/cookies","Cookie æ”¿ç­–"),className:"hover:text-purple-400 transition-colors cursor-pointer active:scale-95",children:"Cookie æ”¿ç­–"}),s.jsx(i,{to:"/accessibility",onClick:e=>c(e,"/accessibility","æ— éšœç¢å£°æ˜"),className:"hover:text-purple-400 transition-colors cursor-pointer active:scale-95",children:"æ— éšœç¢å£°æ˜"})]})]})]}),r&&s.jsx(ge.button,{initial:{opacity:0,y:20},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-8 right-8 w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center z-50","aria-label":"å›åˆ°é¡¶éƒ¨",title:"å›åˆ°é¡¶éƒ¨",children:s.jsx(N,{className:"w-5 h-5"})})]})};var Oe=Object.defineProperty,ze=Object.defineProperties,Ue=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,Qe=(e,t,s)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ve=(e,t)=>{for(var s in t||(t={}))Be.call(t,s)&&Qe(e,s,t[s]);if(qe)for(var s of qe(t))We.call(t,s)&&Qe(e,s,t[s]);return e},Ge=(e,t)=>ze(e,Ue(t));const _e=({settings:e,onUpdate:r,isOpen:i=!0,onClose:n})=>{const[l,o]=t.useState("general"),[c,h]=t.useState(e),m=[{id:"general",label:"é€šç”¨",icon:d},{id:"camera",label:"æ‘„åƒå¤´",icon:P},{id:"audio",label:"éŸ³é¢‘",icon:I},{id:"theme",label:"å¤–è§‚",icon:M}];return s.jsx(be,{children:i&&s.jsxs(s.Fragment,{children:[s.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),s.jsxs(ge.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25},className:"fixed right-0 top-0 bottom-0 w-full md:w-[600px] bg-white dark:bg-gray-800 shadow-2xl z-50 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:s.jsx(d,{className:"w-6 h-6 text-white"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"è®¾ç½®"})]}),s.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:s.jsx(a,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})})]}),s.jsx("div",{className:"flex space-x-1 p-4 border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:m.map(e=>{const t=e.icon;return s.jsxs(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(e.id),className:`\n                      flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors whitespace-nowrap\n                      ${l===e.id?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"}\n                    `,children:[s.jsx(t,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:e.label})]},e.id)})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["general"===l&&s.jsx(Je,{settings:c,onUpdate:h}),"camera"===l&&s.jsx(Ye,{settings:c,onUpdate:h}),"audio"===l&&s.jsx(Ze,{settings:c,onUpdate:h}),"theme"===l&&s.jsx(Ke,{settings:c,onUpdate:h})]}),s.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{h(e)},className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:[s.jsx(F,{className:"w-4 h-4"}),s.jsx("span",{children:"é‡ç½®"})]}),s.jsxs(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{r(c),null==n||n()},className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-medium shadow-lg hover:shadow-xl transition-shadow",children:[s.jsx(A,{className:"w-4 h-4"}),s.jsx("span",{children:"ä¿å­˜è®¾ç½®"})]})]})]})]})})},Je=({settings:e,onUpdate:t})=>s.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"è¯­è¨€è®¾ç½®"}),s.jsxs("select",{value:e.language,onChange:s=>t(Ge(Ve({},e),{language:s.target.value})),className:"w-full p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white",children:[s.jsx("option",{value:"zh",children:"ç®€ä½“ä¸­æ–‡ ğŸ‡¨ğŸ‡³"}),s.jsx("option",{value:"en",children:"English ğŸ‡ºğŸ‡¸"})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(l,{className:"w-5 h-5 text-purple-500"}),s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"é€šçŸ¥"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.notifications,onChange:s=>t(Ge(Ve({},e),{notifications:s.target.checked})),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"å¯ç”¨åï¼Œæ‚¨å°†æ”¶åˆ°é‡è¦æ“ä½œçš„é€šçŸ¥æé†’"})]}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"è‡ªåŠ¨ä¿å­˜"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"è‡ªåŠ¨ä¿å­˜æ‚¨çš„è¯†åˆ«ç»“æœå’Œç¿»è¯‘è®°å½•"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.autoSave,onChange:s=>t(Ge(Ve({},e),{autoSave:s.target.checked})),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"éŸ³æ•ˆ"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"æ“ä½œæ—¶æ’­æ”¾æç¤ºéŸ³æ•ˆ"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.soundEffects,onChange:s=>t(Ge(Ve({},e),{soundEffects:s.target.checked})),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})})]}),Ye=({settings:e,onUpdate:t})=>s.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"æ‘„åƒå¤´è®¾å¤‡"}),s.jsxs("select",{value:e.cameraId,onChange:s=>t(Ge(Ve({},e),{cameraId:s.target.value})),className:"w-full p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"é€‰æ‹©æ‘„åƒå¤´..."}),s.jsx("option",{value:"default",children:"é»˜è®¤æ‘„åƒå¤´"})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"æµ‹è¯•æ‘„åƒå¤´"}),s.jsx("div",{className:"bg-black rounded-lg aspect-video flex items-center justify-center",children:s.jsx(P,{className:"w-16 h-16 text-gray-600"})})]})]}),Ze=({settings:e,onUpdate:t})=>s.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"éº¦å…‹é£è®¾å¤‡"}),s.jsxs("select",{value:e.microphoneId,onChange:s=>t(Ge(Ve({},e),{microphoneId:s.target.value})),className:"w-full p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:"é€‰æ‹©éº¦å…‹é£..."}),s.jsx("option",{value:"default",children:"é»˜è®¤éº¦å…‹é£"})]})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"æµ‹è¯•éº¦å…‹é£"}),s.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900 dark:to-pink-900 rounded-lg h-32 flex items-center justify-center",children:s.jsx(I,{className:"w-12 h-12 text-purple-500"})})]})]}),Ke=({settings:e,onUpdate:t})=>s.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[{id:"light",name:"æµ…è‰²æ¨¡å¼",icon:"â˜€ï¸",desc:"æ˜äº®æ¸…æ–°çš„ç•Œé¢"},{id:"dark",name:"æ·±è‰²æ¨¡å¼",icon:"ğŸŒ™",desc:"æŠ¤çœ¼çš„æ·±è‰²ä¸»é¢˜"},{id:"auto",name:"è·Ÿéšç³»ç»Ÿ",icon:"ğŸ”„",desc:"è‡ªåŠ¨åˆ‡æ¢ä¸»é¢˜"}].map(a=>s.jsx(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(Ge(Ve({},e),{theme:a.id})),className:`\n            w-full p-4 rounded-xl border-2 transition-all\n            ${e.theme===a.id?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-purple-300"}\n          `,children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-3xl",children:a.icon}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:a.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.desc})]}),e.theme===a.id&&s.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})},a.id))}),Xe={default:{bg:"bg-white",border:"border-gray-200",icon:"text-gray-600"},success:{bg:"bg-green-50",border:"border-green-200",icon:"text-green-600"},warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:"text-yellow-600"},error:{bg:"bg-red-50",border:"border-red-200",icon:"text-red-600"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:"text-blue-600"}},et=({title:e,children:a,variant:r="default",hoverable:i=!0,clickable:n=!1,onClick:l,loading:o=!1,className:c="",icon:d,actions:h,shadow:m="md"})=>{const[x,u]=t.useState(!1),p=Xe[r],g={idle:{y:0,rotateX:0,rotateY:0,scale:1,boxShadow:i?"0 4px 6px -1px rgba(0, 0, 0, 0.1)":"none"},hover:i?{y:-8,scale:1.02,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"}:{}};return s.jsxs(ge.div,{className:`\n        relative rounded-2xl border-2 p-6\n        ${p.bg} ${p.border}\n        ${n?"cursor-pointer":""}\n        transition-all duration-300\n        ${c}\n      `,variants:g,initial:"idle",animate:x?"hover":"idle",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onClick:n&&!o?l:void 0,whileTap:n?{scale:.98}:{},transition:{type:"spring",stiffness:300,damping:20},children:[s.jsx(be,{children:o&&s.jsx(ge.div,{className:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 backdrop-blur-sm rounded-2xl",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.jsxs(ge.div,{className:"relative w-12 h-12",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:[s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-blue-500 border-r-transparent border-b-blue-500 border-l-transparent"}),s.jsx("div",{className:"absolute inset-2 rounded-full border-4 border-t-transparent border-r-blue-400 border-b-transparent border-l-blue-400"})]})})}),s.jsx(be,{children:x&&i&&s.jsx(ge.div,{className:"absolute inset-0 rounded-2xl pointer-events-none",initial:{opacity:0},animate:{opacity:.1},exit:{opacity:0},style:{background:"radial-gradient(circle at center, rgba(59, 130, 246, 0.3) 0%, transparent 70%)"}})}),(e||d)&&s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d&&s.jsx(ge.div,{className:`${p.icon}`,animate:x?{scale:1.1,rotate:5}:{},transition:{type:"spring",stiffness:300},children:d}),e&&s.jsx(ge.h3,{className:"text-xl font-semibold text-gray-800",animate:x?{x:4}:{},children:e})]}),s.jsx(ge.div,{opacity:o?0:1,animating:{opacity:o?0:1},children:a}),h&&s.jsx(ge.div,{className:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-200",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:h}),s.jsx(be,{children:x&&n&&s.jsx(ge.div,{className:"absolute top-4 right-4",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:s.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})})]})},tt=({title:e,subtitle:t,ctaText:a="ç«‹å³å¼€å§‹",secondaryCtaText:r="äº†è§£æ›´å¤š",onCtaClick:i,onSecondaryCtaClick:n,gradientClass:l="bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 dark:from-gray-900 dark:via-purple-900 dark:to-blue-900",stats:o,showDecorations:c=!0,className:d="",badgeText:h="AIé©±åŠ¨çš„æ™ºèƒ½äº¤æµå¹³å°"})=>{const m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",damping:12,stiffness:100}}};return s.jsxs("section",{className:`relative overflow-hidden ${l} py-16 md:py-24 lg:py-32 px-4 ${d}`,children:[c&&s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none","aria-hidden":"true",children:[s.jsx(ge.div,{animate:{scale:[1,1.2,1],rotate:[0,90,0]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"absolute -top-32 -right-32 w-64 h-64 bg-purple-300 dark:bg-purple-700 rounded-full opacity-20 blur-3xl"}),s.jsx(ge.div,{animate:{scale:[1,1.1,1],rotate:[0,-90,0]},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute -bottom-32 -left-32 w-96 h-96 bg-pink-300 dark:bg-pink-700 rounded-full opacity-20 blur-3xl"}),s.jsx(ge.div,{animate:{scale:[1,1.3,1],opacity:[.1,.2,.1]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-blue-200 dark:bg-blue-800 rounded-full opacity-10 blur-3xl"})]}),s.jsx("div",{className:"max-w-7xl mx-auto relative",children:s.jsxs(ge.div,{variants:m,initial:"hidden",animate:"visible",className:"text-center",children:[s.jsx(ge.div,{variants:x,className:"mb-6 md:mb-8",children:s.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full px-4 md:px-6 py-2 md:py-3 shadow-lg",children:[s.jsx(D,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-500"}),s.jsx("span",{className:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-300",children:h})]})}),s.jsx(ge.h1,{variants:x,className:"text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold mb-4 md:mb-6 leading-tight",children:s.jsx("span",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 bg-clip-text text-transparent",children:e})}),s.jsx(ge.p,{variants:x,className:"text-lg md:text-xl lg:text-2xl text-gray-600 dark:text-gray-400 mb-8 md:mb-12 max-w-3xl mx-auto leading-relaxed",children:t}),s.jsxs(ge.div,{variants:x,className:"flex flex-col sm:flex-row items-center justify-center gap-4 md:gap-6 mb-12 md:mb-16",children:[s.jsxs(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"\n                w-full sm:w-auto px-8 py-4 md:px-10 md:py-5\n                bg-gradient-to-r from-purple-600 to-pink-600\n                text-white rounded-full font-semibold text-lg shadow-lg \n                hover:shadow-xl transition-all flex items-center justify-center space-x-2\n              ",children:[s.jsx("span",{children:a}),s.jsx(E,{className:"w-5 h-5"})]}),s.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"w-full sm:w-auto px-8 py-4 md:px-10 md:py-5 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full font-semibold text-lg shadow-lg hover:shadow-xl transition-all border-2 border-transparent hover:border-purple-300 dark:hover:border-purple-600",children:r})]}),o&&o.length>0&&s.jsx(ge.div,{variants:m,initial:"hidden",animate:"visible",className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 max-w-4xl mx-auto",children:o.map((e,t)=>s.jsxs(ge.div,{variants:x,className:"\n                    bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl \n                    p-4 md:p-6 shadow-lg hover:shadow-xl transition-shadow\n                  ",children:[s.jsx("p",{className:"text-2xl md:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-1",children:e.value}),s.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:e.label})]},t))})]})}),s.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-24 ${l} bg-gradient-to-t from-transparent to-current opacity-50`})]})},st=({id:e,title:t,description:a,icon:r,gradient:i="from-purple-500 to-pink-500",bgColor:n="bg-purple-50 dark:bg-purple-900/20",path:l,onClick:o,linkText:c="å¼€å§‹ä½¿ç”¨",showMore:d=!0,hoverBorderColor:h="border-purple-400",className:m="",delay:x=0,whileInView:u=!0})=>{const p=s.jsx("div",{className:`\n        group block p-6 md:p-8 rounded-3xl border-2 border-transparent\n        transition-all duration-300 hover:shadow-2xl\n        transform hover:-translate-y-1\n        ${n} hover:${h}\n        ${m}\n      `,onClick:o,children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(ge.div,{whileHover:{rotate:15,scale:1.1},className:`\n            w-14 h-14 md:w-16 md:h-16 rounded-2xl flex items-center justify-center\n            bg-gradient-to-br ${i}\n            shadow-lg group-hover:shadow-xl transition-shadow flex-shrink-0\n          `,children:s.jsx(r,{className:"w-7 h-7 md:w-8 md:h-8 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2 md:mb-3 text-gray-900 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:t}),s.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-3 md:mb-4 leading-relaxed",children:a}),d&&s.jsxs("div",{className:"flex items-center text-purple-600 dark:text-purple-400 font-medium text-sm md:text-base",children:[s.jsx("span",{children:c}),s.jsx(ge.div,{initial:{x:0},whileHover:{x:5},transition:{type:"spring",stiffness:300},children:s.jsx(E,{className:"w-4 h-4 md:w-5 md:h-5 ml-2"})})]})]})]})});return u?s.jsx(ge.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:x,duration:.5},children:s.jsx("div",{onClick:o,className:"cursor-pointer",children:p})}):s.jsx("div",{onClick:o,className:"cursor-pointer",children:p})},at=({steps:e,activeStep:t=0,direction:a="horizontal",showNumbers:r=!0,showConnectors:i=!0,connectorColor:n="border-purple-300 dark:border-purple-600",className:l="",onStepClick:o})=>{const c="vertical"===a;return s.jsx("div",{className:`w-full ${l}`,children:s.jsx("div",{className:`flex ${c?"flex-col":"flex-row"} items-center ${c?"gap-6":"gap-4 md:gap-8"}`,children:e.map((a,l)=>{const d=l===t,h=l<t||a.completed&&d,m=l===e.length-1,x=a.icon;return s.jsxs(u.Fragment,{children:[s.jsx(ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*l},className:`flex flex-col ${c?"items-start":"items-center"} ${c?"w-full":"flex-1"}`,children:s.jsxs("div",{onClick:()=>null==o?void 0:o(a,l),className:`\n                    relative flex items-center ${c?"space-x-4 mb-2":"flex-col space-y-3"}\n                    cursor-pointer transition-transform hover:scale-105\n                  `,children:[s.jsx("div",{className:`\n                    relative z-10 w-12 h-12 md:w-14 md:h-14 rounded-full\n                    flex items-center justify-center transition-all duration-300\n                    ${d?"bg-gradient-to-br from-purple-600 to-pink-600 shadow-lg shadow-purple-500/30":h?"bg-gradient-to-br from-green-500 to-emerald-500 shadow-lg shadow-green-500/30":"bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700"}\n                  `,children:h?s.jsx(L,{className:"w-6 h-6 md:w-7 md:h-7 text-white"}):d?x?s.jsx(x,{className:"w-6 h-6 md:w-7 md:h-7 text-white"}):s.jsx(R,{className:"w-6 h-6 md:w-7 md:h-7 text-white"}):r?s.jsx("span",{className:"text-lg font-bold text-gray-400 dark:text-gray-500",children:l+1}):x?s.jsx(x,{className:"w-6 h-6 md:w-7 md:h-7 text-gray-400 dark:text-gray-500"}):null}),d&&s.jsx(ge.div,{className:"absolute inset-0 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 -z-10",animate:{scale:[1.2,1.5,1.2],opacity:[.5,.2,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{width:"80px",height:"80px",marginLeft:c?"-8px":"-14px",marginTop:c?"-8px":"-14px"}}),s.jsxs("div",{className:"flex flex-col "+(c?"flex-1":"items-center text-center"),children:[s.jsx("h3",{className:`\n                      font-semibold mb-1 transition-colors\n                      ${d?"text-purple-600 dark:text-purple-400":h?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-gray-100"}\n                    `,children:a.title}),s.jsx("p",{className:`\n                      text-sm transition-opacity\n                      ${d?"opacity-100":"opacity-70"}\n                    `,style:{maxWidth:c?"auto":"200px",color:"var(--color-text-secondary, #4b5563)"},children:a.description})]})]})}),i&&!m&&s.jsx("div",{className:`\n                    ${c?"w-0.5 h-6 ml-6":"flex-1 h-0.5"}\n                    border-t-2 ${c?"border-l-2":"border-t-2"} \n                    ${n} \n                    ${h?"border-green-400 dark:border-green-500":""}\n                  `,style:{position:"relative",overflow:"hidden"},children:h&&s.jsx(ge.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-green-300 to-transparent dark:via-green-600",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear"},style:{left:0,right:0,top:0,bottom:0}})})]},a.id)})})})},rt=({testimonial:e,showRating:t=!0,className:a="",delay:r=0,whileInView:i=!0,onClick:n})=>{const{name:l,avatar:o,role:c,content:d,rating:h=5,verified:m=!1,date:x,gradient:u="from-purple-50 dark:from-purple-900/20 to-pink-50 dark:to-pink-900/20"}=e,p=s.jsxs(ge.div,{onClick:n,className:`\n        relative bg-gradient-to-br ${u} rounded-2xl md:rounded-3xl\n        p-6 md:p-8 shadow-lg hover:shadow-xl transition-shadow duration-300\n        ${n?"cursor-pointer":""}\n        ${a}\n      `,whileHover:{y:-4},children:[s.jsx($,{className:"absolute top-4 right-4 md:top-6 md:right-6 w-8 h-8 md:w-10 md:h-10 text-purple-300 dark:text-purple-600 opacity-30"}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm md:text-base lg:text-lg leading-relaxed mb-6 relative",children:d}),t&&s.jsxs("div",{className:"flex items-center space-x-1 mb-4 md:mb-6",children:[Array.from({length:5}).map((e,t)=>s.jsx(H,{className:"w-4 h-4 md:w-5 md:h-5 "+(t<h?"text-yellow-400 fill-current":"text-gray-300 dark:text-gray-600")},t)),m&&s.jsx(L,{className:"w-4 h-4 ml-2 text-blue-500"})]}),s.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[o?s.jsx("img",{src:o,alt:l,className:"w-12 h-12 md:w-14 md:h-14 rounded-full object-cover border-2 border-white dark:border-gray-700 shadow-md"}):s.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-lg md:text-xl shadow-md",children:l.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm md:text-base truncate",children:l}),m&&s.jsx(L,{className:"w-3 h-3 text-blue-500 flex-shrink-0"})]}),c&&s.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:c})]}),x&&s.jsx("time",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500 flex-shrink-0",children:new Date(x).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"})})]})]});return i?s.jsx(ge.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:r,duration:.5},children:p}):p},it=({testimonials:e=[],itemsPerPage:t=3,className:a=""})=>{const[r,i]=u.useState(0),n=Math.ceil(e.length/t),l=r*t,o=e.slice(l,l+t);return s.jsxs("div",{className:`relative ${a}`,children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((e,t)=>s.jsx(rt,{testimonial:e,delay:.1*t},e.id))}),n>1&&s.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-8",children:[s.jsx(ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{i(e=>(e-1+n)%n)},className:"p-2 md:p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:shadow-xl transition-shadow border border-gray-200 dark:border-gray-700","aria-label":"ä¸Šä¸€é¡µ",children:s.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:n}).map((e,t)=>s.jsx("button",{onClick:()=>i(t),className:`\n                  w-2 h-2 md:w-3 md:h-3 rounded-full transition-all duration-300\n                  ${t===r?"bg-gradient-to-r from-purple-600 to-pink-600 w-6 md:w-8":"bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500"}\n                `,"aria-label":`æŸ¥çœ‹ç¬¬ ${t+1} é¡µè¯„ä»·`},t))}),s.jsx(ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{i(e=>(e+1)%n)},className:"p-2 md:p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:shadow-xl transition-shadow border border-gray-200 dark:border-gray-700","aria-label":"ä¸‹ä¸€é¡µ",children:s.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})},nt={LOW:{width:640,height:480,label:"ä½ (640x480)"},MEDIUM:{width:1280,height:720,label:"ä¸­ (1280x720)"},HIGH:{width:1920,height:1080,label:"é«˜ (1920x1080)"},ULTRA:{width:2560,height:1440,label:"è¶…é«˜æ¸… (2560x1440)"}},lt={LOW:15,HIGH:30},ot=.85,ct=1024,dt=3e3,ht=5,mt=3e4,xt=5e3,ut=50,pt={slowThreshold:500,fastThreshold:100,bufferSize:10},gt=15,bt=5,ft=60,yt=128,vt=128;var wt=Object.defineProperty,jt=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Ct=(e,t,s)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,St=(e,t)=>{for(var s in t||(t={}))kt.call(t,s)&&Ct(e,s,t[s]);if(jt)for(var s of jt(t))Nt.call(t,s)&&Ct(e,s,t[s]);return e},Tt=(e,t,s)=>new Promise((a,r)=>{var i=e=>{try{l(s.next(e))}catch(t){r(t)}},n=e=>{try{l(s.throw(e))}catch(t){r(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((s=s.apply(e,t)).next())});const Pt=(e,t)=>{},It=()=>{const e=!!navigator.mediaDevices,t=e&&"function"==typeof navigator.mediaDevices.getUserMedia,s=e&&"function"==typeof navigator.mediaDevices.enumerateDevices;return e&&t&&s},Mt=(e={})=>{const{onSuccess:s,onError:a,onFrameRateChange:r,targetFrameRate:i=lt.HIGH,resolution:n="MEDIUM",facingMode:l="user"}=e,o=t.useRef(null),c=t.useRef(null),d=t.useRef(null),h=t.useRef(0),m=t.useRef(Date.now()),x=t.useRef(null),[u,p]=t.useState({isStreaming:!1,isConnected:!1,hasPermission:!1,isLoading:!1,error:null,errorType:null,frameRate:i,resolution:nt[n]}),[g,b]=t.useState([]),[f,y]=t.useState(""),[v,w]=t.useState(!1),j=t.useCallback(e=>{p(t=>St(St({},t),e))},[]),k=t.useCallback(()=>{const e=Date.now(),t=(e-m.current)/1e3,s=h.current/t;s>0&&s!==u.frameRate&&(j({frameRate:Math.round(s)}),null==r||r(Math.round(s))),h.current=0,m.current=e},[u.frameRate,j,r]),N=t.useCallback(()=>{h.current=0,m.current=Date.now(),x.current=setInterval(()=>{k()},1e3)},[k]),C=t.useCallback(()=>{x.current&&(clearInterval(x.current),x.current=null)},[]),S=t.useCallback(()=>Tt(void 0,null,function*(){try{const e=It();if(!e)return j({error:"æµè§ˆå™¨ä¸æ”¯æŒæ‘„åƒå¤´è®¿é—®ï¼Œè¯·ä½¿ç”¨ç°ä»£æµè§ˆå™¨",errorType:"general"}),[];window.isSecureContext||"localhost"===window.location.hostname||window.location.hostname;window.location.protocol,window.location.hostname;const t=yield navigator.mediaDevices.enumerateDevices();t.length,t.forEach((e,t)=>{e.kind,e.label,""===e.deviceId||e.deviceId.slice(0,8),e.groupId});const s=t.filter(e=>"videoinput"===e.kind).map((e,t)=>({deviceId:e.deviceId,label:e.label||`æ‘„åƒå¤´ ${t+1} (éœ€è¦æƒé™ä»¥æ˜¾ç¤ºåç§°)`,kind:e.kind}));return s.length,b(s),0===s.length&&j({error:"æœªæ£€æµ‹åˆ°æ‘„åƒå¤´è®¾å¤‡ï¼Œè¯·ç¡®ä¿æ‘„åƒå¤´å·²è¿æ¥å¹¶å…è®¸è®¿é—®",errorType:"device"}),s}catch(e){const t=e;return t.name,t.message,t.stack,j({error:`è·å–è®¾å¤‡åˆ—è¡¨å¤±è´¥: ${t.message}`,errorType:"general"}),null==a||a(t),[]}}),[j,a]),T=t.useCallback(()=>Tt(void 0,null,function*(){j({isLoading:!0,error:null,errorType:null});if(!It())return j({isLoading:!1,error:"æµè§ˆå™¨ä¸æ”¯æŒæ‘„åƒå¤´è®¿é—®ï¼Œè¯·ä½¿ç”¨ç°ä»£æµè§ˆå™¨ (Chrome, Firefox, Edge, Safari)",errorType:"general"}),null==a||a(new Error("æµè§ˆå™¨ä¸æ”¯æŒ WebRTC")),!1;!navigator.mediaDevices||navigator.mediaDevices.getUserMedia;try{const e=window.isSecureContext||"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;if(window.location.protocol,window.location.hostname,window.location.href,!e)return j({isLoading:!1,error:"æ‘„åƒå¤´è®¿é—®éœ€è¦ HTTPS æˆ– localhost ç¯å¢ƒ\nå½“å‰ç¯å¢ƒ: "+window.location.hostname,errorType:"general"}),null==a||a(new Error("éå®‰å…¨ä¸Šä¸‹æ–‡")),!1;const t={audio:!1,video:!0};JSON.stringify(t,null,2);const s=yield navigator.mediaDevices.getUserMedia(t);if(s.getTracks().length,s.getVideoTracks().length,s.getTracks().map(e=>e.kind),0===s.getVideoTracks().length)return s.getTracks().forEach(e=>e.stop()),j({isLoading:!1,error:"è·å–çš„è§†é¢‘æµä¸­æ²¡æœ‰è§†é¢‘è½¨é“",errorType:"device"}),!1;const r=s.getVideoTracks()[0].getSettings();r.deviceId,r.width,r.height,r.frameRate,r.facingMode,r.deviceId&&(y(r.deviceId),r.deviceId.slice(0,8)),s.getTracks().forEach((e,t)=>{e.kind,e.label,e.stop()}),j({isLoading:!1,hasPermission:!0,error:null,errorType:null});return(yield S()).length,w(!0),!0}catch(e){const t=e;t.name,t.message,t.constraint,t.stack;let s="",r="general";return"NotAllowedError"===t.name?(s='ç”¨æˆ·æ‹’ç»äº†æ‘„åƒå¤´è®¿é—®æƒé™\n\nè§£å†³æ–¹æ³•ï¼š\n1. ç‚¹å‡»æµè§ˆå™¨åœ°å€æ çš„é”å›¾æ ‡\n2. æ‰¾åˆ°"æ‘„åƒå¤´"æƒé™ï¼Œè®¾ç½®ä¸º"å…è®¸"\n3. åˆ·æ–°é¡µé¢é‡è¯•',r="permission"):"NotFoundError"===t.name?(s="æœªæ‰¾åˆ°æ‘„åƒå¤´è®¾å¤‡\n\nè§£å†³æ–¹æ³•ï¼š\n1. æ£€æŸ¥æ‘„åƒå¤´æ˜¯å¦å·²æ­£ç¡®è¿æ¥\n2. ç¡®è®¤è®¾å¤‡ç®¡ç†å™¨ä¸­æ‘„åƒå¤´å·²è¢«è¯†åˆ«\n3. å°è¯•é‡æ–°æ’æ‹”æ‘„åƒå¤´",r="device"):"NotReadableError"===t.name?(s="æ‘„åƒå¤´æ— æ³•è¯»å–\n\nå¯èƒ½åŸå› ï¼š\n1. æ‘„åƒå¤´å·²è¢«å…¶ä»–åº”ç”¨å ç”¨\n2. æ‘„åƒå¤´é©±åŠ¨ç¨‹åºé—®é¢˜\n3. æƒé™å†²çª\n\nè§£å†³æ–¹æ³•ï¼š\n1. å…³é—­å…¶ä»–ä½¿ç”¨æ‘„åƒå¤´çš„åº”ç”¨\n2. é‡å¯æµè§ˆå™¨\n3. é‡å¯è®¡ç®—æœº",r="readable"):"OverconstrainedError"===t.name?(s="æ‘„åƒå¤´ä¸æ”¯æŒè¯·æ±‚çš„é…ç½®\n\nåŸå› : "+(t.message||"æœªçŸ¥"),r="general"):"TypeError"===t.name?(s="æ‘„åƒå¤´è¯·æ±‚å‚æ•°æ— æ•ˆ: "+t.message,r="general"):"NotSupportedError"===t.name?(s="æµè§ˆå™¨ä¸æ”¯æŒæ‘„åƒå¤´è®¿é—®\n\nè¯·ä½¿ç”¨ç°ä»£æµè§ˆå™¨ (Chrome, Firefox, Edge, Safari)",r="general"):(s=`è¯·æ±‚æ‘„åƒå¤´æƒé™å¤±è´¥: ${t.message}\né”™è¯¯ç±»å‹: ${t.name}`,r="general"),j({isLoading:!1,hasPermission:!1,error:s,errorType:r}),s.substring(0,50),null==a||a(t),!1}}),[j,a,S]),P=(e,t,s)=>Tt(void 0,null,function*(){try{JSON.stringify(e,null,2);const t=yield navigator.mediaDevices.getUserMedia(e);return t.getTracks().length,t.getVideoTracks().length,{stream:t,error:null}}catch(t){const e=t;return e.name,e.message,e.constraint,{stream:null,error:e.message}}}),I=t.useCallback(e=>Tt(void 0,null,function*(){try{if(j({isLoading:!0,error:null,errorType:null}),!v){if(!(yield T()))return null}c.current,c.current&&c.current.tagName;const r=(null==e?void 0:e.resolution)||nt[n],d=(null==e?void 0:e.frameRate)||i,m=(null==e?void 0:e.facingMode)||l,x=null==e?void 0:e.deviceId;x&&x.slice(0,8);const u=[r,{width:640,height:480},{width:320,height:240}],p=x?[x,...g.filter(e=>e.deviceId!==x).map(e=>e.deviceId)]:[...g.map(e=>e.deviceId)],b=[d,30,15];let f=null,w=null;for(let e=0;e<u.length&&!w;e++){const t=u[e];for(let e=0;e<p.length&&!w;e++){const s=p[e];for(let e=0;e<b.length&&!w;e++){const a=b[e];let r;r=s&&""!==s?{audio:!1,video:{deviceId:{exact:s},width:{ideal:t.width,min:320,max:1920},height:{ideal:t.height,min:240,max:1080},frameRate:{ideal:a,min:10,max:60}}}:{audio:!1,video:{facingMode:m,width:{ideal:t.width,min:320,max:1920},height:{ideal:t.height,min:240,max:1080},frameRate:{ideal:a,min:10,max:60}}},Pt(0,(t.width,t.height,s&&s.slice(0,8)));const i=yield P(r);i.stream?(w=i.stream,Pt()):f=i.error}}}if(!w){const e=f||"æ— æ³•è·å–è§†é¢‘æµï¼Œæ‰€æœ‰å°è¯•å‡å¤±è´¥";return j({isLoading:!1,isStreaming:!1,isConnected:!1,error:e,errorType:"readable"}),null==a||a(new Error(e)),null}o.current=w;const k=w.getVideoTracks()[0].getSettings(),C={width:k.width||640,height:k.height||480};if(C.width,C.height,k.frameRate,k.deviceId&&k.deviceId.slice(0,8),k.deviceId&&y(k.deviceId),c.current){const e=c.current;e.readyState,e.videoWidth,e.videoHeight,e.srcObject,e.autoplay,e.playsInline,e.muted,e.srcObject=w,e.muted=!0,e.playsInline=!0,e.autoplay=!1,e.crossOrigin="anonymous";try{yield new Promise((e,t)=>{if(!c.current)return void t(new Error("Video element not found"));let s,a=!1;const r=()=>{s&&clearTimeout(s),c.current&&(c.current.onloadedmetadata=null,c.current.onerror=null)};c.current.onloadedmetadata=()=>{if(a)return;a=!0,r();const t=c.current;t.readyState,t.videoWidth,t.videoHeight,t.duration,e()},c.current.onerror=e=>{var s,i,n;if(a)return;a=!0,r();const l=c.current;l.error,null==(s=l.error)||s.code,null==(i=l.error)||i.message,l.srcObject,l.readyState;t(new Error(`Video error: ${(null==(n=l.error)?void 0:n.message)||"Unknown error"}`))},s=window.setTimeout(()=>{if(a)return;a=!0,r();const s=c.current;s.readyState,s.videoWidth,s.videoHeight,s.srcObject,s.paused,s.currentTime,s.videoWidth>0&&s.videoHeight>0?e():t(new Error("Video load timeout: æ— æ³•è·å–è§†é¢‘æµ"))},15e3)});const e=c.current;if(e.paused)try{yield e.play(),e.paused,e.currentTime}catch(t){const s=t;throw s.name,s.message,e.paused,e.readyState,e.videoWidth,e.videoHeight,"NotAllowedError"===s.name?new Error("æµè§ˆå™¨é˜»æ­¢äº†è‡ªåŠ¨æ’­æ”¾ï¼Œè¯·ç‚¹å‡»é¡µé¢å…è®¸æ’­æ”¾"):new Error(`è§†é¢‘æ’­æ”¾å¤±è´¥: ${s.message}`)}}catch(t){const e=t;let s=`è§†é¢‘æ’­æ”¾å¤±è´¥: ${e.message}`,a="general";throw e.message.includes("timeout")?(s="è§†é¢‘åŠ è½½è¶…æ—¶ï¼šæ‘„åƒå¤´å¯èƒ½æ•…éšœæˆ–è¢«å ç”¨ï¼Œè¯·æ£€æŸ¥è®¾å¤‡è¿æ¥",a="readable"):(e.message.includes("NotAllowedError")||e.message.includes("è‡ªåŠ¨æ’­æ”¾"))&&(s="æµè§ˆå™¨é˜»æ­¢äº†è§†é¢‘æ’­æ”¾ï¼Œè¯·åˆ·æ–°é¡µé¢å¹¶ç‚¹å‡»å…è®¸",a="permission"),j({error:s,errorType:a}),t}}if(c.current){const e=()=>{const e=()=>{!c.current||c.current.paused||c.current.ended||(h.current++,requestAnimationFrame(e))};e()};c.current.addEventListener("play",e,{once:!0})}return N(),j({isLoading:!1,isStreaming:!0,isConnected:!0,hasPermission:!0,error:null,errorType:null,resolution:C}),null==s||s(w),w}catch(r){const e=r;e.name,e.message,e.stack;let t="",s="general";return"NotAllowedError"===e.name?(t="ç”¨æˆ·æ‹’ç»äº†æ‘„åƒå¤´è®¿é—®æƒé™\n\nè§£å†³æ–¹æ³•ï¼š\n1. æ£€æŸ¥æµè§ˆå™¨åœ°å€æ çš„æƒé™è®¾ç½®\n2. å…è®¸æ‘„åƒå¤´è®¿é—®æƒé™\n3. åˆ·æ–°é¡µé¢é‡è¯•",s="permission"):"NotFoundError"===e.name?(t="æœªæ‰¾åˆ°æ‘„åƒå¤´è®¾å¤‡\n\nè§£å†³æ–¹æ³•ï¼š\n1. æ£€æŸ¥æ‘„åƒå¤´æ˜¯å¦å·²è¿æ¥\n2. ç¡®è®¤æ‘„åƒå¤´æœªè¢«å…¶ä»–ç¨‹åºå ç”¨\n3. å°è¯•é‡æ–°æ’æ‹”æ‘„åƒå¤´",s="device"):"NotReadableError"===e.name?(t="æ‘„åƒå¤´æ— æ³•è¯»å–\n\nå¯èƒ½åŸå› ï¼š\n1. æ‘„åƒå¤´å·²è¢«å…¶ä»–åº”ç”¨å ç”¨\n2. æ‘„åƒå¤´ç¡¬ä»¶æ•…éšœ\n3. é©±åŠ¨ç¨‹åºé—®é¢˜\n\nè§£å†³æ–¹æ³•ï¼š\n1. å…³é—­å…¶ä»–ä½¿ç”¨æ‘„åƒå¤´çš„åº”ç”¨\n2. é‡æ–°å¯åŠ¨æµè§ˆå™¨\n3. é‡å¯è®¡ç®—æœº",s="readable"):"OverconstrainedError"===e.name?(t="æ‘„åƒå¤´ä¸æ”¯æŒè¯·æ±‚çš„è§†é¢‘é…ç½®\n\nå°è¯•é™ä½åˆ†è¾¨ç‡æˆ–å¸§ç‡\nå½“å‰é…ç½®å¯èƒ½è¶…å‡ºäº†æ‘„åƒå¤´èƒ½åŠ›çš„é™åˆ¶",s="general"):"NotSupportedError"===e.name?(t="æµè§ˆå™¨ä¸æ”¯æŒæ­¤åŠŸèƒ½\n\nè¯·ä½¿ç”¨ç°ä»£æµè§ˆå™¨ï¼šChromeã€Firefoxã€Edge æˆ– Safari",s="general"):e.message.includes("timeout")||e.message.includes("è¶…æ—¶")?(t="è§†é¢‘åŠ è½½è¶…æ—¶ï¼šæ— æ³•è·å–è§†é¢‘æµ\n\nå¯èƒ½åŸå› ï¼š\n1. æ‘„åƒå¤´å“åº”è¿‡æ…¢\n2. ç½‘ç»œé—®é¢˜\n3. æ‘„åƒå¤´é©±åŠ¨é—®é¢˜\n\nè§£å†³æ–¹æ³•ï¼š\n1. æ£€æŸ¥æ‘„åƒå¤´è¿æ¥\n2. å°è¯•æ›´æ¢æ‘„åƒå¤´\n3. é‡å¯æµè§ˆå™¨å’Œè®¡ç®—æœº",s="readable"):e.message.includes("Video error")?(t="è§†é¢‘å…ƒç´ é”™è¯¯\n\nè¯·æ£€æŸ¥ï¼š\n1. æ‘„åƒå¤´æ˜¯å¦æ­£å¸¸å·¥ä½œ\n2. æµè§ˆå™¨æ˜¯å¦æ”¯æŒ\n3. æ˜¯å¦æœ‰å…¶ä»–ç¨‹åºå ç”¨äº†æ‘„åƒå¤´",s="readable"):(t=`å¯åŠ¨è§†é¢‘æµå¤±è´¥\né”™è¯¯ç±»å‹: ${e.name}\né”™è¯¯ä¿¡æ¯: ${e.message}\n\nè¯·æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯`,s="general"),j({isLoading:!1,isStreaming:!1,isConnected:!1,error:t,errorType:s}),t.substring(0,80),null==a||a(e),null}}),[v,j,T,n,i,l,g,N,s,a]),M=t.useCallback(()=>{C(),o.current&&(o.current.getTracks().forEach(e=>{e.kind,e.stop()}),o.current=null),c.current&&(c.current.srcObject=null),j({isStreaming:!1,isConnected:!1,frameRate:0})},[j,C]),F=t.useCallback(()=>Tt(void 0,null,function*(){if(g.length<2)return j({error:"æ²¡æœ‰å¯åˆ‡æ¢çš„æ‘„åƒå¤´",errorType:"device"}),null;const e=g.findIndex(e=>e.deviceId===f),t=-1===e?0:(e+1)%g.length,s=g[t];return s.deviceId,M(),yield I({deviceId:s.deviceId})}),[g,f,M,I,j]),A=t.useCallback(e=>Tt(void 0,null,function*(){if(!u.isStreaming&&g.length>0)return yield I({resolution:nt[e]});if(!u.isStreaming)return j({error:"è¯·å…ˆè¯·æ±‚æ‘„åƒå¤´æƒé™",errorType:"permission"}),null;const t=nt[e];return M(),yield I({resolution:t})}),[u.isStreaming,g.length,M,I,j]),D=t.useCallback(()=>{if(!c.current||!o.current)return null;const e=c.current,t=d.current||document.createElement("canvas"),s=t.getContext("2d");return s?(t.width=e.videoWidth||640,t.height=e.videoHeight||480,t.width,t.height,s.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg",.85)):null},[]),E=t.useCallback(()=>o.current,[]),L=t.useCallback(()=>Tt(void 0,null,function*(){const e=[],t=[],s=[],{browserName:a,browserVersion:r,os:i}=(()=>{var e,t,s,a;const r=navigator.userAgent;let i="Unknown",n="Unknown";r.includes("Chrome")&&!r.includes("Edg")?(i="Chrome",n=(null==(e=r.match(/Chrome\/(\d+\.\d+\.\d+\.\d+)/))?void 0:e[1])||"Unknown"):r.includes("Safari")&&!r.includes("Chrome")?(i="Safari",n=(null==(t=r.match(/Version\/(\d+\.\d+\.\d+)/))?void 0:t[1])||"Unknown"):r.includes("Firefox")?(i="Firefox",n=(null==(s=r.match(/Firefox\/(\d+\.\d+)/))?void 0:s[1])||"Unknown"):r.includes("Edg")&&(i="Edge",n=(null==(a=r.match(/Edg\/(\d+\.\d+\.\d+\.\d+)/))?void 0:a[1])||"Unknown");let l="Unknown";return r.includes("Windows")?l="Windows":r.includes("Mac")?l="macOS":r.includes("Linux")?l="Linux":r.includes("Android")?l="Android":r.includes("iOS")&&(l="iOS"),{browserName:i,browserVersion:n,os:l}})(),n=window.isSecureContext||"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,l=!!navigator.mediaDevices,c=l&&"function"==typeof navigator.mediaDevices.getUserMedia,d=l&&"function"==typeof navigator.mediaDevices.enumerateDevices;l||(e.push("æµè§ˆå™¨ä¸æ”¯æŒ MediaDevices API"),s.push("è¯·ä½¿ç”¨ç°ä»£æµè§ˆå™¨ï¼ˆæ¨è Chrome 90+ã€Firefox 88+ã€Edge 90+ï¼‰")),c||e.push("æµè§ˆå™¨ä¸æ”¯æŒ getUserMedia API"),d||t.push("æµè§ˆå™¨ä¸æ”¯æŒ enumerateDevices APIï¼Œå¯èƒ½æ— æ³•è·å–è®¾å¤‡åˆ—è¡¨"),n||(e.push("å½“å‰ç¯å¢ƒä¸å®‰å…¨ï¼Œä»…åœ¨ HTTPS æˆ– localhost ä¸‹æ‰èƒ½è®¿é—®æ‘„åƒå¤´"),t.push(`å½“å‰åè®®: ${window.location.protocol}, ä¸»æœº: ${window.location.hostname}`),s.push("è¯·ä½¿ç”¨ HTTPS åè®®æˆ–åœ¨æœ¬åœ° (localhost) è¿è¡Œ"));let h=0,m=[];try{if(d){m=(yield navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind).map((e,t)=>({deviceId:e.deviceId,label:e.label||`æ‘„åƒå¤´ ${t+1} (éœ€è¦æƒé™)`,kind:e.kind})),h=m.length,0===h&&(e.push("æœªæ£€æµ‹åˆ°ä»»ä½•æ‘„åƒå¤´è®¾å¤‡"),s.push("è¯·æ£€æŸ¥ï¼š1. æ‘„åƒå¤´æ˜¯å¦å·²è¿æ¥ 2. æ‘„åƒå¤´æ˜¯å¦åœ¨å…¶ä»–åº”ç”¨ä¸­è¢«å ç”¨ 3. é©±åŠ¨ç¨‹åºæ˜¯å¦æ­£å¸¸"))}}catch(j){e.push("æ— æ³•è·å–è®¾å¤‡åˆ—è¡¨: "+j.message)}let x=u.hasPermission,p=!1;try{if(d){p=(yield navigator.mediaDevices.enumerateDevices()).some(e=>"videoinput"===e.kind&&""===e.label)}}catch(j){}p&&(t.push("æ‘„åƒå¤´æƒé™å¯èƒ½è¢«æ‹’ç»ï¼Œè®¾å¤‡åç§°æœªæ˜¾ç¤º"),s.push("è¯·ç‚¹å‡»æµè§ˆå™¨åœ°å€æ çš„é”å›¾æ ‡ï¼Œå…è®¸æ‘„åƒå¤´è®¿é—®æƒé™"));let g=u.isStreaming,b=!!o.current&&o.current.getVideoTracks().length>0,y=u.resolution.width,v=u.resolution.height;g&&!b&&e.push("è§†é¢‘æµå·²å¯åŠ¨ä½†æ²¡æœ‰è§†é¢‘è½¨é“"),"Safari"===a&&parseFloat(r)<14&&(t.push(`æ‚¨ä½¿ç”¨çš„ Safari ç‰ˆæœ¬è¾ƒä½ (${r})ï¼Œå»ºè®®å‡çº§åˆ° 14.0 æˆ–æ›´é«˜ç‰ˆæœ¬`),s.push("å‡çº§ Safari ä»¥è·å¾—æ›´å¥½çš„æ‘„åƒå¤´æ”¯æŒ")),"Chrome"===a&&parseFloat(r)<90&&t.push(`æ‚¨ä½¿ç”¨çš„ Chrome ç‰ˆæœ¬è¾ƒä½ (${r})ï¼Œå»ºè®®å‡çº§åˆ° 90 æˆ–æ›´é«˜ç‰ˆæœ¬`),0!==e.length||g||s.push('ç‚¹å‡»"å¯åŠ¨æ‘„åƒå¤´"æŒ‰é’®å¼€å§‹ä½¿ç”¨'),e.length>0&&s.push('æŸ¥çœ‹ä¸‹æ–¹"æ•…éšœæ’é™¤æŒ‡å—"è·å–æ›´å¤šå¸®åŠ©');const w={browserName:a,browserVersion:r,os:i,isSecureContext:n,protocol:window.location.protocol,hostname:window.location.hostname,hasMediaDevices:l,hasGetUserMedia:c,hasEnumerateDevices:d,deviceCount:h,devices:m,hasCurrentDevice:!!f,hasPermission:x,permissionDenied:p,isStreaming:g,hasVideoTracks:b,videoWidth:y,videoHeight:v,errors:e,warnings:t,suggestions:s};return e.length,t.length,s.length,w}),[u.hasPermission,u.isStreaming,u.resolution,f,o]),R=t.useCallback(()=>Tt(void 0,null,function*(){return j({error:null,errorType:null}),"permission"===u.errorType?yield T():"device"===u.errorType?(yield S(),yield I()):yield I()}),[u.errorType,T,S,I,j]);return t.useEffect(()=>()=>{M()},[M]),t.useEffect(()=>{v||u.hasPermission||u.error||S()},[v,u.hasPermission,u.error,S]),{state:u,devices:g,currentDeviceId:f,isInitialized:v,streamRef:o,videoRef:c,canvasRef:d,requestPermission:T,startStream:I,stopStream:M,switchCamera:F,switchResolution:A,captureFrame:D,getDevices:S,getStream:E,retry:R,runDiagnostics:L}};class Ft{constructor(e={}){this.targetFrameRate=e.targetFrameRate||gt,this.currentQuality=e.quality||ot,this.sequence=0,this.frameBuffer=[],this.lastCaptureTime=0,this.frameInterval=1e3/this.targetFrameRate,this.droppedFrames=0,this.fpsHistory=[],this.isProcessing=!1,this.canvas=document.createElement("canvas");const t=this.canvas.getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("æ— æ³•åˆ›å»º Canvas 2D ä¸Šä¸‹æ–‡");this.ctx=t}captureFrame(e){if(!e||e.paused||e.ended)return null;const t=Date.now();if(t-this.lastCaptureTime<this.frameInterval)return this.droppedFrames++,null;this.lastCaptureTime=t;try{const s=e.videoWidth,a=e.videoHeight;if(!s||!a)return null;const{width:r,height:i}=this.calculateCropSize(s,a);this.canvas.width=r,this.canvas.height=i,this.preprocessFrame(e,r,i);const n=this.ctx.getImageData(0,0,r,i),l={data:this.encodeToBase64(n,r,i),timestamp:t,sequence:this.sequence++,quality:this.currentQuality,width:r,height:i};return this.frameBuffer.push(l),this.updateFpsHistory(),l}catch(s){return null}}captureBatchFrames(e,t=bt){const s=[];let a=0;for(;a<t;){const t=this.captureFrame(e);if(!t)break;s.push(t),a++}return s}getFramesFromBuffer(){const e=[...this.frameBuffer];return this.frameBuffer=[],e}clearBuffer(){this.frameBuffer=[]}calculateCropSize(e,t){const s=ct,a=e/t;let r=e,i=t;return(r>s||i>s)&&(r>i?(r=s,i=Math.round(s/a)):(i=s,r=Math.round(s*a))),{width:r,height:i}}preprocessFrame(e,t,s){this.ctx.drawImage(e,0,0,t,s);const a=this.ctx.getImageData(0,0,t,s),r=a.data;for(let i=0;i<r.length;i+=4){let e=r[i],t=r[i+1],s=r[i+2];{const a=yt-128;e+=a,t+=a,s+=a}{const a=(vt-128)/128+1;e=(e-128)*a+128,t=(t-128)*a+128,s=(s-128)*a+128}r[i]=Math.max(0,Math.min(255,e)),r[i+1]=Math.max(0,Math.min(255,t)),r[i+2]=Math.max(0,Math.min(255,s))}this.ctx.putImageData(a,0,0)}encodeToBase64(e,t,s){const a=document.createElement("canvas");a.width=t,a.height=s;const r=a.getContext("2d");if(!r)throw new Error("æ— æ³•åˆ›å»ºä¸´æ—¶ Canvas ä¸Šä¸‹æ–‡");return r.putImageData(e,0,0),a.toDataURL("image/jpeg",this.currentQuality)}updateFpsHistory(){Date.now();this.lastCaptureTime;const e=1e3/this.frameInterval;this.fpsHistory.push(e),this.fpsHistory.length>ft&&this.fpsHistory.shift()}getAverageFps(){if(0===this.fpsHistory.length)return 0;const e=this.fpsHistory.reduce((e,t)=>e+t,0);return Math.round(e/this.fpsHistory.length)}getPerformanceMetrics(){const e=this.estimateMemoryUsage(),t=this.estimateCpuUsage();return{fps:this.getAverageFps(),avgLatency:this.frameInterval,cpuUsage:t,memoryUsage:e,bufferSize:this.frameBuffer.length,droppedFrames:this.droppedFrames}}estimateMemoryUsage(){const e=this.canvas.width*this.canvas.height*3*.15*this.frameBuffer.length;return Math.round(e/1048576)}estimateCpuUsage(){const e=this.sequence+this.droppedFrames;if(0===e)return 0;const t=this.droppedFrames/e;return Math.min(100,Math.round(200*t))}setTargetFrameRate(e){this.targetFrameRate=Math.max(At,Math.min(Dt,e)),this.frameInterval=1e3/this.targetFrameRate}setQuality(e){this.currentQuality=Math.max(.1,Math.min(1,e))}adaptToNetwork(e){const t=((e,t)=>{const{slowThreshold:s,fastThreshold:a}=pt;return t>s?Math.max(lt.LOW,Math.floor(.7*e)):t<a?Math.min(lt.HIGH,Math.floor(1.2*e)):e})(this.targetFrameRate,e);this.setTargetFrameRate(t);const s=((e,t)=>{const{slowThreshold:s,fastThreshold:a}=pt;return t>s?Math.max(.5,.85*e):t<a?Math.min(1,Math.min(1.1*e,ot)):e})(this.currentQuality,e);this.setQuality(s)}getBufferSize(){return this.frameBuffer.length}getDroppedFrames(){return this.droppedFrames}resetDroppedFrames(){this.droppedFrames=0}destroy(){this.clearBuffer(),this.fpsHistory=[],this.sequence=0}}const At=5,Dt=60,Et=e=>new Ft(e);var Lt=Object.defineProperty,Rt=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,Ot=(e,t,s)=>t in e?Lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,zt=(e,t)=>{for(var s in t||(t={}))$t.call(t,s)&&Ot(e,s,t[s]);if(Rt)for(var s of Rt(t))Ht.call(t,s)&&Ot(e,s,t[s]);return e},Ut=(e,t,s)=>new Promise((a,r)=>{var i=e=>{try{l(s.next(e))}catch(t){r(t)}},n=e=>{try{l(s.throw(e))}catch(t){r(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((s=s.apply(e,t)).next())});class qt{constructor(e,t){this.config=zt({reconnectDelay:dt,maxReconnectAttempts:ht,enableAdaptiveQuality:!0,targetLatency:100},e),this.videoProcessor=t||null,this.ws=null,this.sendQueue=[],this.latencyHistory=[],this.isConnecting=!1,this.shouldReconnect=!0,this.sendInterval=null,this.heartbeatInterval=null,this.qualityCheckInterval=null,this.state={isConnected:!1,isSending:!1,totalFrames:0,bytesSent:0,avgLatency:0,quality:1,frameRate:gt,reconnectAttempts:0}}connect(){return new Promise((e,t)=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN)e();else if(this.isConnecting)t(new Error("æ­£åœ¨è¿æ¥ä¸­"));else{this.isConnecting=!0;try{this.ws=new WebSocket(this.config.url),this.ws.onopen=()=>{this.isConnecting=!1,this.state.isConnected=!0,this.state.reconnectAttempts=0,this.latencyHistory=[],this.startHeartbeat(),this.startSending(),this.config.enableAdaptiveQuality&&this.startQualityCheck(),e()},this.ws.onclose=e=>{if(this.isConnecting=!1,this.state.isConnected=!1,this.stopHeartbeat(),this.stopQualityCheck(),this.shouldReconnect&&this.state.reconnectAttempts<(this.config.maxReconnectAttempts||0)){this.state.reconnectAttempts++;const e=this.config.reconnectDelay;setTimeout(()=>{this.connect().catch(e=>{})},e)}},this.ws.onerror=e=>{this.isConnecting=!1,t(e)},this.ws.onmessage=e=>Ut(this,null,function*(){yield this.handleMessage(e)})}catch(s){this.isConnecting=!1,t(s)}}})}disconnect(){this.shouldReconnect=!1,this.stopSending(),this.stopHeartbeat(),this.stopQualityCheck(),this.sendQueue=[],this.ws&&(this.ws.close(),this.ws=null),this.state.isConnected=!1,this.state.isSending=!1}addFrame(e){this.state.isConnected&&(this.sendQueue.length>=ut&&this.sendQueue.shift(),this.sendQueue.push(e))}addFrames(e){e.forEach(e=>this.addFrame(e))}startSending(){if(null!==this.sendInterval)return;this.state.isSending=!0;const e=1e3/this.state.frameRate;this.sendInterval=window.setInterval(()=>{this.processSendQueue()},e)}stopSending(){null!==this.sendInterval&&(clearInterval(this.sendInterval),this.sendInterval=null),this.state.isSending=!1}processSendQueue(){if(!this.ws||this.ws.readyState!==WebSocket.OPEN||0===this.sendQueue.length)return;const e=this.sendQueue.shift();if(e)try{Date.now();this.sendFrame(e);const t=Date.now()-e.timestamp;this.updateLatency(t),this.state.totalFrames++,this.state.bytesSent+=e.data.length}catch(t){}}sendFrame(e){if(!this.ws)return;const t={type:"video_frame",data:e.data,timestamp:e.timestamp,sequence:e.sequence,quality:e.quality,width:e.width,height:e.height};this.ws.send(JSON.stringify(t))}updateLatency(e){this.latencyHistory.push(e);const t=pt.bufferSize;this.latencyHistory.length>t&&this.latencyHistory.shift(),this.state.avgLatency=this.calculateAverageLatency()}calculateAverageLatency(){if(0===this.latencyHistory.length)return 0;const e=this.latencyHistory.reduce((e,t)=>e+t,0);return Math.round(e/this.latencyHistory.length)}handleMessage(e){return Ut(this,null,function*(){try{const t=JSON.parse(e.data);switch(t.type){case"ack":if(t.timestamp){const e=Date.now()-t.timestamp;this.updateLatency(e)}break;case"network_quality":this.config.enableAdaptiveQuality&&this.adaptToNetwork(t.latency||this.state.avgLatency)}}catch(t){}})}startHeartbeat(){null===this.heartbeatInterval&&(this.heartbeatInterval=window.setInterval(()=>{this.sendHeartbeat()},mt))}stopHeartbeat(){null!==this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}sendHeartbeat(){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return;const e={type:"heartbeat",timestamp:Date.now()};try{this.ws.send(JSON.stringify(e))}catch(t){}}startQualityCheck(){null===this.qualityCheckInterval&&(this.qualityCheckInterval=window.setInterval(()=>{this.checkAndAdaptQuality()},xt))}stopQualityCheck(){null!==this.qualityCheckInterval&&(clearInterval(this.qualityCheckInterval),this.qualityCheckInterval=null)}checkAndAdaptQuality(){if(!this.videoProcessor)return;const e=this.state.avgLatency;this.videoProcessor.adaptToNetwork(e);const t=this.videoProcessor.getPerformanceMetrics();this.state.quality=t.fps/this.state.frameRate,this.state.frameRate=t.fps,this.state.isSending&&(this.stopSending(),this.startSending())}adaptToNetwork(e){this.videoProcessor&&this.videoProcessor.adaptToNetwork(e)}getState(){return zt({},this.state)}getQueueSize(){return this.sendQueue.length}setVideoProcessor(e){this.videoProcessor=e}updateConfig(e){this.config=zt(zt({},this.config),e)}}const Bt={hello:{label:"ä½ å¥½",color:"#3B82F6",description:"æŒ¥æ‰‹é—®å€™"},thankyou:{label:"è°¢è°¢",color:"#10B981",description:"åŒæ‰‹åˆå"},sorry:{label:"å¯¹ä¸èµ·",color:"#F59E0B",description:"åŒæ‰‹æ‚å¿ƒ"},love:{label:"çˆ±",color:"#EF4444",description:"æ¯”å¿ƒæ‰‹åŠ¿"},yes:{label:"æ˜¯",color:"#8B5CF6",description:"ç‚¹å¤´æ‰‹åŠ¿"},no:{label:"å¦",color:"#6B7280",description:"æ‘‡å¤´æ‰‹åŠ¿"}},Wt={hello:[[{x:.2,y:.4},{x:.25,y:.35},{x:.2,y:.4},{x:.15,y:.35},{x:.2,y:.4}],[{x:.8,y:.4},{x:.75,y:.35},{x:.8,y:.4},{x:.85,y:.35},{x:.8,y:.4}]],thankyou:[[{x:.5,y:.3},{x:.5,y:.35},{x:.5,y:.4},{x:.5,y:.45},{x:.5,y:.5}]],sorry:[[{x:.45,y:.5},{x:.5,y:.48},{x:.55,y:.5},{x:.5,y:.52}],[{x:.48,y:.45},{x:.5,y:.47},{x:.52,y:.45},{x:.5,y:.43}]],love:[[{x:.4,y:.4},{x:.45,y:.35},{x:.5,y:.3},{x:.55,y:.35},{x:.6,y:.4}]],yes:[[{x:.5,y:.35},{x:.5,y:.4},{x:.5,y:.45},{x:.5,y:.4},{x:.5,y:.35}]],no:[[{x:.45,y:.4},{x:.4,y:.4},{x:.45,y:.4},{x:.5,y:.4},{x:.55,y:.4},{x:.5,y:.4}]]},Qt=({onRecognized:e,className:a=""})=>{const r=t.useRef(null),i=t.useRef(null),[n,l]=t.useState("hello"),[o,c]=t.useState(!1),[d,h]=t.useState(0),[m,x]=t.useState(0),u=()=>{const e=r.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const s=e.width,a=e.height;t.clearRect(0,0,s,a),((e,t,s)=>{const a=e.createLinearGradient(0,0,0,s);a.addColorStop(0,"#1E293B"),a.addColorStop(1,"#0F172A"),e.fillStyle=a,e.fillRect(0,0,t,s),e.strokeStyle="rgba(255, 255, 255, 0.05)",e.lineWidth=1;for(let r=0;r<t;r+=50)e.beginPath(),e.moveTo(r,0),e.lineTo(r,s),e.stroke();for(let r=0;r<s;r+=50)e.beginPath(),e.moveTo(0,r),e.lineTo(t,r),e.stroke()})(t,s,a),((e,t,s)=>{const a=Bt[n];e.fillStyle="rgba(0, 0, 0, 0.7)",e.strokeStyle=a.color,e.lineWidth=2;const r=(t-300)/2,i=s-100;if(e.beginPath(),e.roundRect(r,i,300,80,10),e.fill(),e.stroke(),e.fillStyle="#FFFFFF",e.font="bold 20px Arial",e.textAlign="center",e.fillText(`æ‰‹åŠ¿: ${a.label}`,t/2,i+35),e.font="14px Arial",e.fillStyle="#94A3B8",e.fillText(a.description,t/2,i+60),o){const s=200,r=6,n=(t-s)/2,l=i-20;e.fillStyle="rgba(255, 255, 255, 0.3)",e.beginPath(),e.roundRect(n,l,s,r,3),e.fill();const o=d,c=s*o,h=e.createLinearGradient(n,l,n+c,l);h.addColorStop(0,a.color),h.addColorStop(1,"#FFFFFF"),e.fillStyle=h,e.beginPath(),e.roundRect(n,l,c,r,3),e.fill(),e.fillStyle="#FFFFFF",e.font="12px Arial",e.textAlign="center",e.fillText(`è¯†åˆ«ä¸­... ${(100*o).toFixed(0)}%`,t/2,l-10)}})(t,s,a),o?((e,t,s)=>{const a=Bt[n];Wt[n].forEach((r,i)=>{e.strokeStyle=a.color,e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.shadowColor=a.color,e.shadowBlur=10,e.beginPath();let n=!0;const l=Math.floor(r.length*d),o=r.length*d%1;if(r.forEach((r,i)=>{const o=r.x*t,c=r.y*s;i>=l||(n?(e.moveTo(o,c),n=!1):e.lineTo(o,c),e.fillStyle=a.color,e.beginPath(),e.arc(o,c,8,0,2*Math.PI),e.fill())}),l<r.length&&o>0){const i=r[l],n=r[l],c=i.x*t+(n.x*t-i.x*t)*o,d=i.y*s+(n.y*s-i.y*s)*o;e.lineTo(c,d),e.fillStyle=a.color,e.beginPath(),e.arc(c,d,8,0,2*Math.PI),e.fill()}e.stroke(),e.shadowBlur=0})})(t,s,a):((e,t,s,a)=>{e.fillStyle="#94A3B8",e.beginPath(),e.arc(t,s,a,0,2*Math.PI),e.fill(),e.fillStyle="#FFFFFF",e.font=`${a}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("ğŸ‘‹",t,s)})(t,s/2,a/2,40)},p=()=>{c(!0),h(0);let t=null;const s=a=>{t||(t=a);const r=a-t,o=Math.min(r/2e3,1);if(h(o),o>=1){c(!1);const t=.85+.1*Math.random();x(t),e(Bt[n].label,t),setTimeout(()=>{const e=Object.keys(Bt),t=(e.indexOf(n)+1)%e.length;l(e[t]),x(0),p()},3e3)}else i.current=requestAnimationFrame(s)};i.current=requestAnimationFrame(s)};return t.useEffect(()=>{const e=r.current;if(!e)return;e.width=1280,e.height=720;const t=()=>{u(),requestAnimationFrame(t)},s=requestAnimationFrame(t),a=setTimeout(()=>{p()},1e3);return()=>{cancelAnimationFrame(s),clearTimeout(a),i.current&&cancelAnimationFrame(i.current)}},[n]),s.jsxs("div",{className:`relative w-full h-full bg-slate-900 ${a}`,children:[s.jsx("canvas",{ref:r,className:"w-full h-full object-cover",style:{imageRendering:"auto"}}),s.jsx(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-4 py-2 rounded-full font-bold shadow-lg",children:"âš¡ æ¼”ç¤ºæ¨¡å¼"}),s.jsx(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"absolute right-4 top-1/2 transform -translate-y-1/2 flex flex-col space-y-2",children:Object.entries(Bt).map(([e,t])=>s.jsxs("button",{onClick:()=>{l(e),x(0),i.current&&cancelAnimationFrame(i.current),p()},className:"p-3 rounded-lg transition-all "+(n===e?"bg-white shadow-lg scale-110":"bg-white/20 hover:bg-white/40"),title:t.label,style:{border:n===e?`2px solid ${t.color}`:"none"},children:[s.jsx("span",{className:"text-2xl",children:"âœ‹"}),s.jsx("span",{className:"block text-xs mt-1",children:t.label})]},e))})]})},Vt=[{id:"permission",title:"æ‘„åƒå¤´æƒé™é—®é¢˜",icon:s.jsx(z,{className:"w-6 h-6"}),severity:"high",solutions:["ç‚¹å‡»æµè§ˆå™¨åœ°å€æ å·¦ä¾§çš„é”å›¾æ ‡æˆ–ä¿¡æ¯å›¾æ ‡",'åœ¨å¼¹å‡ºçš„èœå•ä¸­æ‰¾åˆ°"æ‘„åƒå¤´"é€‰é¡¹','å°†æ‘„åƒå¤´æƒé™è®¾ç½®ä¸º"å…è®¸"',"åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½","å¦‚æœä»æ— æ³•è§£å†³ï¼Œå°è¯•åœ¨æµè§ˆå™¨è®¾ç½®ä¸­æ¸…é™¤ç¼“å­˜å¹¶é‡å¯æµè§ˆå™¨"]},{id:"device",title:"è®¾å¤‡è¿æ¥é—®é¢˜",icon:s.jsx(U,{className:"w-6 h-6"}),severity:"high",solutions:["æ£€æŸ¥æ‘„åƒå¤´ç‰©ç†è¿æ¥æ˜¯å¦ç‰¢å›º","å°è¯•æ›´æ¢USBæ¥å£è¿æ¥æ‘„åƒå¤´","ç¡®è®¤æ‘„åƒå¤´æ²¡æœ‰è¢«å…¶ä»–åº”ç”¨ç¨‹åºå ç”¨ï¼ˆå¦‚è…¾è®¯ä¼šè®®ã€Zoomç­‰ï¼‰","åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­æ£€æŸ¥æ‘„åƒå¤´é©±åŠ¨æ˜¯å¦æ­£å¸¸","å°è¯•é‡æ–°æ’æ‹”æ‘„åƒå¤´æˆ–é‡å¯è®¡ç®—æœº","å¦‚æœæ˜¯å¤–æ¥æ‘„åƒå¤´ï¼Œå°è¯•è¿æ¥åˆ°å…¶ä»–ç”µè„‘æµ‹è¯•æ˜¯å¦æ­£å¸¸å·¥ä½œ"]},{id:"https",title:"HTTPSè®¿é—®é™åˆ¶",icon:s.jsx(q,{className:"w-6 h-6"}),severity:"high",solutions:["æµè§ˆå™¨è¦æ±‚æ‘„åƒå¤´è®¿é—®å¿…é¡»åœ¨HTTPSç¯å¢ƒä¸‹","å¦‚æœæ˜¯åœ¨æœ¬åœ°å¼€å‘ï¼Œè¯·ä½¿ç”¨ localhost æˆ– 127.0.0.1 è®¿é—®","å¦‚æœå·²éƒ¨ç½²çš„ç”Ÿäº§ç¯å¢ƒï¼Œè¯·é…ç½®SSLè¯ä¹¦ä½¿ç”¨HTTPSåè®®","ä¸´æ—¶æµ‹è¯•å¯åœ¨Chromeå¯åŠ¨æ—¶æ·»åŠ  --unsafely-treat-insecure-origin-as-secure å‚æ•°ï¼ˆä»…é™å¼€å‘æµ‹è¯•ï¼‰","å»ºè®®ä½¿ç”¨ ngrok ç­‰å·¥å…·åˆ›å»ºæœ¬åœ°HTTPSéš§é“è¿›è¡Œæµ‹è¯•"]},{id:"browser",title:"æµè§ˆå™¨å…¼å®¹æ€§",icon:s.jsx(B,{className:"w-6 h-6"}),severity:"medium",solutions:["æ¨èä½¿ç”¨ Chrome 90+ã€Firefox 88+ã€Edge 90+ æˆ– Safari 14+","Safari éœ€è¦é¢å¤–é…ç½®æ‘„åƒå¤´æƒé™ï¼ˆç³»ç»Ÿåå¥½è®¾ç½® > å®‰å…¨æ€§ä¸éšç§ï¼‰","å¦‚æœä½¿ç”¨Firefoxï¼Œç¡®ä¿åœ¨ about:config ä¸­å¯ç”¨äº†åª’ä½“è®¾å¤‡","æ›´æ–°æµè§ˆå™¨åˆ°æœ€æ–°ç‰ˆæœ¬","ç¦ç”¨æµè§ˆå™¨æ’ä»¶ï¼ˆå°¤å…¶æ˜¯éšç§ä¿æŠ¤ç±»æ’ä»¶ï¼‰åé‡è¯•"]},{id:"driver",title:"é©±åŠ¨ç¨‹åºé—®é¢˜",icon:s.jsx(W,{className:"w-6 h-6"}),severity:"medium",solutions:['åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­å±•å¼€"ç…§ç›¸æœº"æˆ–"å›¾åƒè®¾å¤‡"ï¼ŒæŸ¥çœ‹æ‘„åƒå¤´çŠ¶æ€','å¦‚æœæœ‰é»„è‰²æ„Ÿå¹å·ï¼Œå³é”®é€‰æ‹©"æ›´æ–°é©±åŠ¨ç¨‹åº"',"å¦‚æœæ›´æ–°æ— æ•ˆï¼Œå°è¯•å¸è½½è®¾å¤‡åé‡æ–°å®‰è£…é©±åŠ¨","è®¿é—®æ‘„åƒå¤´åˆ¶é€ å•†å®˜ç½‘ä¸‹è½½æœ€æ–°é©±åŠ¨ç¨‹åº","Windowsç”¨æˆ·å¯ä½¿ç”¨ Windowsè®¾å¤‡ç®¡ç†å™¨è‡ªåŠ¨æœç´¢é©±åŠ¨æ›´æ–°"]},{id:"other",title:"å…¶ä»–å¸¸è§é—®é¢˜",icon:s.jsx(O,{className:"w-6 h-6"}),severity:"low",solutions:["æ£€æŸ¥ç³»ç»Ÿé˜²ç«å¢™æˆ–æ€æ¯’è½¯ä»¶æ˜¯å¦é˜»æ­¢äº†æ‘„åƒå¤´è®¿é—®","ç¡®ä¿è®¡ç®—æœºçš„ç‰©ç†éšç§å¼€å…³æ²¡æœ‰è¢«å…³é—­","å¦‚æœæ˜¯ç¬”è®°æœ¬ç”µè„‘ï¼Œç¡®è®¤æ²¡æœ‰ä½¿ç”¨Fné”®ç¦ç”¨äº†æ‘„åƒå¤´","æ£€æŸ¥æ‘„åƒå¤´æ˜¯å¦è¢«å…¶ä»–ç”¨æˆ·æˆ–å…¶ä»–ç¨‹åºç‹¬å ä½¿ç”¨","å°è¯•ä½¿ç”¨å‘½ä»¤æç¤ºç¬¦é‡å¯Windowsæ‘„åƒå¤´æœåŠ¡(net stop UsoSvc && net start UsoSvc)"]}],Gt=e=>{switch(e){case"high":return"border-red-500 bg-red-50 dark:bg-red-900/20";case"medium":return"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";case"low":return"border-blue-500 bg-blue-50 dark:bg-blue-900/20";default:return"border-gray-500"}},_t=e=>{switch(e){case"high":return s.jsx(Q,{className:"w-5 h-5 text-red-500"});case"medium":return s.jsx(B,{className:"w-5 h-5 text-yellow-500"});case"low":return s.jsx(L,{className:"w-5 h-5 text-blue-500"});default:return s.jsx(O,{className:"w-5 h-5 text-gray-500"})}},Jt=({onClose:e,openSection:r})=>{const[i,n]=t.useState(new Set(r?[r]:["permission"]));return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs(ge.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:e=>e.stopPropagation(),className:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"æ•…éšœæ’é™¤æŒ‡å—"}),s.jsx("p",{className:"text-blue-100 text-sm",children:"æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è§£å†³æ‘„åƒå¤´è®¿é—®é—®é¢˜"})]}),s.jsx("button",{onClick:e,className:"text-white/80 hover:text-white transition-colors",children:s.jsx(a,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex gap-3 mt-4",children:[s.jsx("button",{onClick:()=>{n(new Set(Vt.map(e=>e.id)))},className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"å±•å¼€å…¨éƒ¨"}),s.jsx("button",{onClick:()=>{n(new Set)},className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"æ”¶èµ·å…¨éƒ¨"})]})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)] space-y-4",children:Vt.map(e=>{const t=i.has(e.id);return s.jsxs(ge.div,{layout:!0,className:`border-l-4 ${Gt(e.severity)} rounded-lg overflow-hidden`,children:[s.jsxs("button",{onClick:()=>{return t=e.id,void n(e=>{const s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s});var t},className:"w-full p-4 flex items-center justify-between text-left bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[_t(e.severity),s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.title})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.solutions.length," ä¸ªè§£å†³æ–¹æ¡ˆ"]}),t?s.jsx(m,{className:"w-5 h-5 text-gray-400"}):s.jsx(y,{className:"w-5 h-5 text-gray-400"})]})]}),s.jsx(be,{children:t&&s.jsx(ge.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:s.jsx("div",{className:"p-4 bg-gray-50 dark:bg-slate-700/50",children:s.jsx("ol",{className:"space-y-3",children:e.solutions.map((e,t)=>s.jsxs(ge.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"flex items-start space-x-3",children:[s.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 flex items-center justify-center text-sm font-semibold",children:t+1}),s.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:e})]},t))})})})})]},e.id)})}),s.jsx("div",{className:"border-t border-gray-200 dark:border-slate-700 p-4 bg-gray-50 dark:bg-slate-700/50",children:s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(O,{className:"w-4 h-4"}),s.jsx("span",{children:"å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·å°è¯•ä½¿ç”¨æ¼”ç¤ºæ¨¡å¼ä½“éªŒäº§å“åŠŸèƒ½"})]})})]})]})};var Yt=(e,t,s)=>new Promise((a,r)=>{var i=e=>{try{l(s.next(e))}catch(t){r(t)}},n=e=>{try{l(s.throw(e))}catch(t){r(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((s=s.apply(e,t)).next())});const Zt=({config:e,active:r=!0,mirrored:i=!0,facingMode:n="user",resolution:l="MEDIUM",onDeviceChange:o,onFrameCaptured:c,onError:d,onStateChange:h,className:m=""})=>{var x;const[u,p]=t.useState(!1),[g,b]=t.useState(!0),[f,y]=t.useState(!1),[v,w]=t.useState(null),[j,k]=t.useState(!1),[N,C]=t.useState(),{state:S,devices:T,currentDeviceId:I,isInitialized:M,videoRef:F,canvasRef:A,requestPermission:D,startStream:E,stopStream:L,switchCamera:R,switchResolution:$,captureFrame:H,retry:q,runDiagnostics:W}=Mt({onError:e=>{W().then(w),null==d||d(e)},resolution:l,facingMode:n}),re=t.useRef(null),ie=t.useRef(null),ne=t.useRef(null),[le,oe]=t.useState(null),[ce,de]=t.useState(!1),[he,me]=t.useState(!1),[xe,ue]=t.useState(null),[pe,fe]=t.useState(null),[ye,ve]=t.useState(l);t.useEffect(()=>(re.current||(re.current=Et({targetFrameRate:(null==e?void 0:e.frameRate)||lt.HIGH,quality:.85,enableMirror:i})),()=>{re.current&&(re.current.destroy(),re.current=null)}),[i,null==e?void 0:e.frameRate]),t.useEffect(()=>{if((null==e?void 0:e.wsUrl)&&(null==e?void 0:e.enableStreaming)&&re.current){ne.current=((e,t)=>new qt(e,t))({url:e.wsUrl,enableAdaptiveQuality:!0},re.current),ne.current.connect().catch(e=>{});const t=setInterval(()=>{ne.current&&fe(ne.current.getState())},1e3);return()=>{clearInterval(t),ne.current&&(ne.current.disconnect(),ne.current=null)}}},[null==e?void 0:e.wsUrl,null==e?void 0:e.enableStreaming]),t.useEffect(()=>{null==h||h(S)},[S,h]),t.useEffect(()=>{Yt(void 0,null,function*(){if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{const e=yield navigator.mediaDevices.enumerateDevices();!e.some(e=>"videoinput"===e.kind)||S.error?b(!0):setTimeout(()=>{(S.isStreaming||S.hasPermission)&&b(!1)},3e3)}catch(e){b(!0)}else b(!1)})},[S.isStreaming,S.hasPermission,S.error]),t.useEffect(()=>{r&&!S.isStreaming&&S.hasPermission?E():!r&&S.isStreaming&&(L(),je())},[r,S.isStreaming,S.hasPermission,E,L]);const we=t.useCallback(()=>{if(ie.current||!F.current||!re.current)return;const t=1e3/((null==e?void 0:e.frameRate)||lt.HIGH);ie.current=window.setInterval(()=>{if(!F.current||!re.current)return;const e=re.current.captureFrame(F.current);if(e&&(null==c||c(e),ne.current&&ne.current.addFrame(e)),re.current){const e=re.current.getPerformanceMetrics();ue(e)}},t)},[null==e?void 0:e.frameRate,c]),je=t.useCallback(()=>{ie.current&&(clearInterval(ie.current),ie.current=null)},[]);t.useEffect(()=>(S.isStreaming&&r?we():je(),()=>{je()}),[S.isStreaming,r,we,je]);const ke=t.useCallback(()=>Yt(void 0,null,function*(){(yield D())&&r&&(yield E())}),[D,r,E]),Ne=t.useCallback(e=>Yt(void 0,null,function*(){e?(L(),yield E({deviceId:e}),me(!1),null==o||o(e)):yield R()}),[R,E,L,o]),Ce=t.useCallback(e=>Yt(void 0,null,function*(){ve(e),yield $(e)}),[$]),Se=t.useCallback(()=>{const e=H();e&&oe(e)},[H]),Te=t.useCallback(()=>{if(!le)return;const e=document.createElement("a");e.href=le,e.download=`capture-${Date.now()}.jpg`,e.click()},[le]),Pe=t.useCallback(()=>{re.current&&(re.current.destroy(),re.current=Et({targetFrameRate:(null==e?void 0:e.frameRate)||lt.HIGH,quality:.85,enableMirror:!i}))},[i,null==e?void 0:e.frameRate]),Ie=t.useCallback(()=>Yt(void 0,null,function*(){const e=yield W();w(e),y(!0),e.errors.length>0&&(e.errors.some(e=>e.includes("æƒé™")||e.includes("permission"))?C("permission"):e.errors.some(e=>e.includes("æ‘„åƒå¤´")||e.includes("device"))?C("device"):e.errors.some(e=>e.includes("HTTPS")||e.includes("å®‰å…¨"))&&C("https"))}),[W]),Me=t.useCallback(()=>{p(e=>{const t=!e;return t?S.isStreaming&&L():M&&r&&D().then(e=>{e&&E()}),t})},[S.isStreaming,M,r,L,D,E]),Fe=t.useCallback((e,t)=>{},[]),Ae=(()=>{if(!S.error)return null;switch(S.errorType){case"permission":return{icon:s.jsx(z,{className:"w-16 h-16 text-yellow-400 mb-4"}),title:"éœ€è¦æ‘„åƒå¤´æƒé™",description:"è¯·åœ¨æµè§ˆå™¨è®¾ç½®ä¸­å…è®¸è®¿é—®æ‘„åƒå¤´",moreInfo:"æˆ–ä½¿ç”¨æ¼”ç¤ºæ¨¡å¼ä½“éªŒäº§å“åŠŸèƒ½",showRetry:!0,showDemo:!0,showDiagnostic:!0};case"device":return{icon:s.jsx(U,{className:"w-16 h-16 text-red-400 mb-4"}),title:"æœªæ£€æµ‹åˆ°æ‘„åƒå¤´",description:"è¯·æ£€æŸ¥æ‘„åƒå¤´æ˜¯å¦å·²æ­£ç¡®è¿æ¥",moreInfo:"å»ºè®®ä½¿ç”¨æ¼”ç¤ºæ¨¡å¼ä½“éªŒå®Œæ•´åŠŸèƒ½",showRetry:!0,showDemo:!0,demoButtonText:"è¿›å…¥æ¼”ç¤ºæ¨¡å¼",diagnostic:!0};case"readable":return{icon:s.jsx(B,{className:"w-16 h-16 text-red-400 mb-4"}),title:"æ‘„åƒå¤´æ— æ³•è®¿é—®",description:"æ‘„åƒå¤´å¯èƒ½å·²è¢«å…¶ä»–åº”ç”¨ç¨‹åºå ç”¨",moreInfo:"æ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨æ¼”ç¤ºæ¨¡å¼",showRetry:!0,showDemo:!0,demoButtonText:"ä½¿ç”¨æ¼”ç¤ºæ¨¡å¼",showDiagnostic:!0};default:return{icon:s.jsx(Q,{className:"w-16 h-16 text-red-400 mb-4"}),title:"æ‘„åƒå¤´å¯åŠ¨å¤±è´¥",description:`${S.error.substring(0,80)}...`,moreInfo:"æ— éœ€æ‘„åƒå¤´ä¹Ÿèƒ½ä½“éªŒæ ¸å¿ƒåŠŸèƒ½",showRetry:!0,showDemo:!0,showDiagnostic:!0}}})();return s.jsxs(s.Fragment,{children:[j&&s.jsx(Jt,{onClose:()=>k(!1),openSection:N}),s.jsxs("div",{className:`relative rounded-lg overflow-hidden bg-gray-900 ${m}`,children:[s.jsx(be,{children:g&&!S.isStreaming&&!S.error&&!u&&s.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-20 flex items-center justify-center bg-gray-900/95 backdrop-blur-sm",children:s.jsxs("div",{className:"text-center px-6 py-8 max-w-md",children:[s.jsxs(ge.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},className:"mb-6",children:[s.jsx(V,{className:"w-20 h-20 text-purple-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"å¯åŠ¨æ‘„åƒå¤´"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"å…è®¸è®¿é—®æ‘„åƒå¤´ä»¥ä½“éªŒå®Œæ•´åŠŸèƒ½ï¼Œæˆ–ä½¿ç”¨æ¼”ç¤ºæ¨¡å¼æ— éœ€æ‘„åƒå¤´ä¹Ÿèƒ½ä½“éªŒ"})]}),s.jsxs(ge.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"flex flex-col gap-3",children:[s.jsxs(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:ke,className:"flex items-center justify-center space-x-2 px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-bold text-lg shadow-lg hover:shadow-purple-500/30 transition-all duration-200",children:[s.jsx(G,{className:"w-6 h-6"}),s.jsx("span",{children:"å¯åŠ¨æ‘„åƒå¤´"})]}),s.jsxs(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{b(!1),p(!0)},className:"flex items-center justify-center space-x-2 px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold text-lg shadow-lg hover:shadow-green-500/30 transition-all duration-200",children:[s.jsx(_,{className:"w-6 h-6"}),s.jsx("span",{children:"è¿›å…¥æ¼”ç¤ºæ¨¡å¼"})]}),s.jsxs(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>b(!1),className:"flex items-center justify-center space-x-2 px-8 py-3 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg font-medium transition-all duration-200",children:[s.jsx(a,{className:"w-5 h-5"}),s.jsx("span",{children:"ç¨å"})]})]})]})})}),u?s.jsx(Qt,{onRecognized:Fe,className:"w-full h-full"}):s.jsxs(s.Fragment,{children:[s.jsx("video",{ref:F,autoPlay:!1,playsInline:!0,muted:!0,className:`\n                w-full h-full object-cover\n                ${i?"scale-x-[-1]":""}\n                transition-transform duration-300\n              `}),s.jsx("canvas",{ref:A,className:"hidden"})]}),s.jsx(be,{children:S.isLoading&&s.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 backdrop-blur-sm",children:[s.jsx(J,{className:"w-12 h-12 text-white mb-4 animate-spin"}),s.jsx("p",{className:"text-white text-lg",children:"æ­£åœ¨å¯åŠ¨æ‘„åƒå¤´..."})]})}),s.jsx(be,{children:!M&&!S.isLoading&&!S.error&&s.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-900/95 backdrop-blur-sm",children:[s.jsx(G,{className:"w-16 h-16 text-gray-400 mb-4"}),s.jsx("p",{className:"text-white text-lg mb-4",children:"å‡†å¤‡å¯åŠ¨æ‘„åƒå¤´"}),s.jsxs("button",{onClick:ke,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-colors flex items-center",children:[s.jsx(G,{className:"w-5 h-5 mr-2"}),"å¯åŠ¨æ‘„åƒå¤´"]}),s.jsx("p",{className:"text-gray-400 text-sm mt-4 text-center px-4",children:"éœ€è¦æ‘„åƒå¤´æƒé™ä»¥è¿›è¡Œæ‰‹è¯­è¯†åˆ«"})]})}),s.jsx(be,{children:Ae&&s.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:[Ae.icon,s.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:Ae.title}),s.jsx("p",{className:"text-gray-300 text-center mb-4 max-w-md",children:Ae.description}),s.jsxs("div",{className:"flex gap-3 flex-wrap justify-center",children:[Ae.showRetry&&s.jsxs("button",{onClick:q,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-colors flex items-center",children:[s.jsx(J,{className:"w-4 h-4 mr-2"}),"é‡è¯•"]}),Ae.showDemo&&s.jsxs("button",{onClick:Me,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg transition-colors flex items-center",children:[s.jsx(Y,{className:"w-4 h-4 mr-2"}),"è¯•ç”¨æ¼”ç¤ºæ¨¡å¼"]}),Ae.showDiagnostic&&s.jsxs("button",{onClick:Ie,className:"bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg transition-colors flex items-center",children:[s.jsx(Z,{className:"w-4 h-4 mr-2"}),"è¯Šæ–­é—®é¢˜"]}),"device"===S.errorType&&T.length>0&&s.jsxs("button",{onClick:()=>me(!0),className:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors flex items-center",children:[s.jsx(G,{className:"w-4 h-4 mr-2"}),"é€‰æ‹©è®¾å¤‡"]})]})]})}),s.jsx(be,{children:!r&&!S.error&&M&&s.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-900/90 backdrop-blur-sm",children:[s.jsx(G,{className:"w-16 h-16 text-gray-600 mb-4"}),s.jsx("p",{className:"text-gray-400 text-lg",children:"æ‘„åƒå¤´å·²å…³é—­"})]})}),s.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-start pointer-events-none z-10",children:[s.jsxs("div",{className:"flex flex-col space-y-2 pointer-events-auto",children:[T.length>1&&S.isStreaming&&s.jsxs(ge.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:()=>me(!he),className:"bg-black/50 text-white px-3 py-2 rounded-lg backdrop-blur-sm border border-white/20 hover:bg-black/70 transition-colors flex items-center",title:"é€‰æ‹©æ‘„åƒå¤´",children:[s.jsx(G,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"text-sm",children:(null==(x=T.find(e=>e.deviceId===I))?void 0:x.label)||"é€‰æ‹©æ‘„åƒå¤´"})]}),S.isStreaming&&s.jsxs(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center bg-black/50 px-3 py-2 rounded-lg backdrop-blur-sm border border-white/20",children:[s.jsx(V,{className:"w-4 h-4 text-green-400 mr-2"}),s.jsx("span",{className:"text-white text-sm",children:"ç›´æ’­ä¸­"}),xe&&s.jsxs("span",{className:"text-gray-300 text-xs ml-2",children:[xe.fps," FPS"]})]})]}),S.isStreaming&&(xe||pe)&&s.jsxs(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex flex-col items-end space-y-1 pointer-events-auto",children:[xe&&s.jsxs("div",{className:"bg-black/50 px-3 py-2 rounded-lg backdrop-blur-sm border border-white/20",children:[s.jsxs("div",{className:"flex items-center text-xs text-gray-300 mb-1",children:[s.jsx(K,{className:"w-3 h-3 mr-1"}),s.jsx("span",{children:"æœ¬åœ°æ€§èƒ½"})]}),s.jsxs("div",{className:"text-white text-sm",children:[xe.fps," FPS | ",xe.bufferSize," å¸§"]})]}),pe&&(null==e?void 0:e.enableStreaming)&&s.jsxs("div",{className:"bg-black/50 px-3 py-2 rounded-lg backdrop-blur-sm border border-white/20",children:[s.jsxs("div",{className:"flex items-center text-xs text-gray-300 mb-1",children:[s.jsx(K,{className:"w-3 h-3 mr-1"}),s.jsx("span",{children:"ç½‘ç»œçŠ¶æ€"})]}),s.jsxs("div",{className:"text-white text-sm",children:[pe.bytesSent/1024," KB | ",pe.avgLatency,"ms"]})]})]})]}),s.jsx(be,{children:he&&T.length>0&&s.jsxs(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-20 left-4 z-50 bg-gray-900/95 backdrop-blur-md rounded-lg shadow-xl border border-gray-700 p-2 min-w-[200px]",children:[s.jsx("div",{className:"text-white text-sm font-semibold mb-2 px-2",children:"é€‰æ‹©æ‘„åƒå¤´"}),T.map(e=>s.jsxs("button",{onClick:()=>Ne(e.deviceId),className:"w-full text-left px-3 py-2 rounded-md transition-colors flex items-center text-sm "+(e.deviceId===I?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800"),children:[s.jsx(G,{className:"w-4 h-4 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.label}),e.deviceId===I&&s.jsx(X,{className:"w-4 h-4 ml-auto text-green-400"})]},e.deviceId)),s.jsx("button",{onClick:()=>me(!1),className:"w-full mt-2 text-center px-3 py-2 rounded-md transition-colors text-gray-400 hover:text-gray-200 hover:bg-gray-800 text-sm",children:"å–æ¶ˆ"})]})}),s.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-20",children:s.jsxs(ge.button,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},onClick:Me,className:`\n            px-4 py-2 rounded-lg flex items-center space-x-2 transition-all\n            ${u?"bg-yellow-500 text-white shadow-lg":"bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white"}\n          `,children:[s.jsx(Y,{className:"w-5 h-5"}),s.jsx("span",{className:"font-semibold",children:"æ¼”ç¤ºæ¨¡å¼"})]})}),f&&v&&s.jsxs(ge.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"absolute top-4 right-4 bottom-4 w-80 bg-gray-900/95 backdrop-blur-md rounded-lg shadow-2xl border border-gray-700 overflow-hidden z-20",children:[s.jsx("div",{className:"p-4 border-b border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-white font-bold flex items-center",children:[s.jsx(Z,{className:"w-5 h-5 mr-2 text-purple-400"}),"è¯Šæ–­ä¿¡æ¯"]}),s.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-white transition-colors",children:s.jsx(a,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto max-h-[calc(100%-60px)]",children:[s.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-300 mb-2 flex items-center",children:[s.jsx(ee,{className:"w-4 h-4 mr-1"}),"ç¯å¢ƒä¿¡æ¯"]}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"æµè§ˆå™¨:"}),s.jsxs("span",{className:"text-white",children:[v.browserName," ",v.browserVersion]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"æ“ä½œç³»ç»Ÿ:"}),s.jsx("span",{className:"text-white",children:v.os})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"å®‰å…¨ç¯å¢ƒ:"}),s.jsx("span",{className:v.isSecureContext?"text-green-400":"text-red-400",children:v.isSecureContext?"âœ“ å®‰å…¨":"âœ— ä¸å®‰å…¨"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"åè®®:"}),s.jsx("span",{className:"text-white",children:v.protocol})]})]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-300 mb-2 flex items-center",children:[s.jsx(te,{className:"w-4 h-4 mr-1"}),"API æ”¯æŒ"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"MediaDevices:"}),v.hasMediaDevices?s.jsx(te,{className:"w-4 h-4 text-green-400"}):s.jsx(a,{className:"w-4 h-4 text-red-400"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"getUserMedia:"}),v.hasGetUserMedia?s.jsx(te,{className:"w-4 h-4 text-green-400"}):s.jsx(a,{className:"w-4 h-4 text-red-400"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"enumerateDevices:"}),v.hasEnumerateDevices?s.jsx(te,{className:"w-4 h-4 text-green-400"}):s.jsx(a,{className:"w-4 h-4 text-red-400"})]})]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-300 mb-2 flex items-center",children:[s.jsx(G,{className:"w-4 h-4 mr-1"}),"è®¾å¤‡ä¿¡æ¯"]}),s.jsxs("div",{className:"text-xs text-gray-400",children:[s.jsxs("div",{className:"mb-2",children:["æ£€æµ‹åˆ° ",s.jsx("span",{className:"text-white",children:v.deviceCount})," ä¸ªæ‘„åƒå¤´"]}),v.devices.length>0&&s.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:v.devices.map((e,t)=>s.jsxs("div",{className:"text-gray-300 truncate",children:[t+1,". ",e.label]},e.deviceId))})]})]}),s.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-300 mb-2 flex items-center",children:[s.jsx(z,{className:"w-4 h-4 mr-1"}),"æƒé™çŠ¶æ€"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"å·²æˆæƒ:"}),v.hasPermission?s.jsx(te,{className:"w-4 h-4 text-green-400"}):s.jsx(a,{className:"w-4 h-4 text-red-400"})]}),v.permissionDenied&&s.jsx("div",{className:"text-red-400 text-xs mt-1",children:"æƒé™å¯èƒ½è¢«æ‹’ç»"})]})]}),v.errors.length>0&&s.jsxs("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-sm font-semibold text-red-400 mb-2 flex items-center",children:[s.jsx(Q,{className:"w-4 h-4 mr-1"}),"å‘ç° ",v.errors.length," ä¸ªé”™è¯¯"]}),s.jsx("div",{className:"space-y-1 text-xs",children:v.errors.map((e,t)=>s.jsxs("div",{className:"text-red-300",children:["â€¢ ",e]},t))})]}),v.warnings.length>0&&s.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-sm font-semibold text-yellow-400 mb-2 flex items-center",children:[s.jsx(B,{className:"w-4 h-4 mr-1"}),"å‘ç° ",v.warnings.length," ä¸ªè­¦å‘Š"]}),s.jsx("div",{className:"space-y-1 text-xs",children:v.warnings.map((e,t)=>s.jsxs("div",{className:"text-yellow-300",children:["â€¢ ",e]},t))})]}),v.suggestions.length>0&&s.jsxs("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-sm font-semibold text-blue-400 mb-2 flex items-center",children:[s.jsx(ee,{className:"w-4 h-4 mr-1"}),"å»ºè®®"]}),s.jsx("div",{className:"space-y-1 text-xs",children:v.suggestions.map((e,t)=>s.jsxs("div",{className:"text-blue-300",children:["â€¢ ",e]},t))})]}),s.jsxs("button",{onClick:()=>{k(!0)},className:"w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center text-sm font-semibold",children:[s.jsx(O,{className:"w-4 h-4 mr-2"}),"æŸ¥çœ‹æ•…éšœæ’é™¤æŒ‡å—"]})]})]}),!S.isStreaming&&!S.error&&M&&s.jsxs(ge.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:Ie,className:"absolute top-4 right-4 bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 z-10",children:[s.jsx(Z,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-semibold",children:"è¯Šæ–­"})]}),S.isStreaming&&!S.error&&!u&&s.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex justify-between items-center pointer-events-none z-10",children:[s.jsx("div",{className:"relative pointer-events-auto",children:s.jsx("select",{value:ye,onChange:e=>Ce(e.target.value),className:"bg-black/50 text-white px-3 py-2 rounded-lg backdrop-blur-sm border border-white/20 text-sm appearance-none pr-8 cursor-pointer hover:bg-black/70 transition-colors",children:Object.entries(nt).map(([e,t])=>s.jsx("option",{value:e,children:t.label},e))})}),s.jsxs("div",{className:"flex items-center space-x-2 pointer-events-auto",children:[s.jsx("button",{onClick:Se,className:"bg-black/50 text-white p-3 rounded-lg backdrop-blur-sm border border-white/20 hover:bg-black/70 transition-colors",title:"æˆªå›¾",children:s.jsx(se,{className:"w-5 h-5"})}),s.jsx("button",{onClick:Pe,className:"bg-black/50 text-white p-3 rounded-lg backdrop-blur-sm border border-white/20 hover:bg-black/70 transition-colors "+(i?"bg-blue-500/50":""),title:"é•œåƒæ¨¡å¼",children:s.jsx(P,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{S.isStreaming?L():E()},className:"bg-black/50 text-white p-3 rounded-lg backdrop-blur-sm border border-white/20 hover:bg-black/70 transition-colors "+(S.isStreaming?"bg-red-500/50":"bg-green-500/50"),title:S.isStreaming?"åœæ­¢":"å¯åŠ¨",children:S.isStreaming?s.jsx(ae,{className:"w-5 h-5"}):s.jsx(_,{className:"w-5 h-5 ml-0.5"})})]}),s.jsxs("div",{className:"flex items-center space-x-2 pointer-events-auto",children:[s.jsx("button",{onClick:Ie,className:"bg-black/50 text-white p-3 rounded-lg backdrop-blur-sm border border-white/20 hover:bg-purple-500/50 transition-colors",title:"è¯Šæ–­",children:s.jsx(Z,{className:"w-5 h-5"})}),s.jsx("button",{onClick:Se,className:"bg-black/50 text-white p-3 rounded-lg backdrop-blur-sm border border-white/20 hover:bg-black/70 transition-colors",title:"æˆªå›¾",children:s.jsx(se,{className:"w-5 h-5"})}),s.jsx("button",{onClick:Pe,className:"bg-black/50 text-white p-3 rounded-lg backdrop-blur-sm border border-white/20 hover:bg-black/70 transition-colors "+(i?"bg-blue-500/50":""),title:"é•œåƒæ¨¡å¼",children:s.jsx(P,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{S.isStreaming?L():E()},className:"bg-black/50 text-white p-3 rounded-lg backdrop-blur-sm border border-white/20 hover:bg-black/70 transition-colors "+(S.isStreaming?"bg-red-500/50":"bg-green-500/50"),title:S.isStreaming?"åœæ­¢":"å¯åŠ¨",children:S.isStreaming?s.jsx(ae,{className:"w-5 h-5"}):s.jsx(_,{className:"w-5 h-5 ml-0.5"})})]})]}),s.jsx(be,{children:le&&s.jsx(ge.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50",children:s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg shadow-2xl",children:[s.jsx("img",{src:le,alt:"æˆªå›¾",className:"max-w-md max-h-md rounded-lg"}),s.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[s.jsx("button",{onClick:Te,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:"ä¸‹è½½"}),s.jsx("button",{onClick:()=>oe(null),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"å…³é—­"})]})]})})})]})]})};var Kt=Object.defineProperty,Xt=Object.getOwnPropertySymbols,es=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,ss=(e,t,s)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,as=(e,t)=>{for(var s in t||(t={}))es.call(t,s)&&ss(e,s,t[s]);if(Xt)for(var s of Xt(t))ts.call(t,s)&&ss(e,s,t[s]);return e},rs=(e,t,s)=>new Promise((a,r)=>{var i=e=>{try{l(s.next(e))}catch(t){r(t)}},n=e=>{try{l(s.throw(e))}catch(t){r(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((s=s.apply(e,t)).next())});const is=new class{constructor(){this.modelCache=new Map,this.defaultConfig={color:"#e8b89d",skinColor:"#f5deb3",shadows:!0,roughness:.7,metalness:.1,dracoPath:"/draco/"},this.loader=new fe,this.dracoLoader=new ye,this.dracoLoader.setDecoderPath(this.defaultConfig.dracoPath),this.loader.setDRACOLoader(this.dracoLoader)}loadModel(e){return rs(this,null,function*(){var t;const s=e.modelUrl;if(e.modelUrl,this.modelCache.has(s))return this.modelCache.get(s);try{const a=yield this.loadGLTF(e.modelUrl);a.scene,null==(t=a.animations)||t.length;const r=a.scene,i=this.extractBones(r);this.configureMaterials(r,e);const n=new Se(r),l=(new Te).setFromObject(r);this.optimizeModel(r);const o={scene:r,bones:i,mixer:n,gltf:a,boundingBox:l};return this.modelCache.set(s,o),o}catch(a){const t=a;t.name,t.message,t.stack;let s=`æ— æ³•åŠ è½½æ‰‹éƒ¨æ¨¡å‹: ${t.message}`;throw t.message.includes("Failed to fetch")?s+="\nå¯èƒ½åŸå› : æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨æˆ–æœåŠ¡å™¨æœªå¯åŠ¨é™æ€æ–‡ä»¶æœåŠ¡":t.message.includes("<!DOCTYPE")&&(s+="\nå¯èƒ½åŸå› : APIç«¯ç‚¹è¿”å›äº†404 HTMLé¡µé¢ï¼Œè¯·æ£€æŸ¥æ¨¡å‹æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®",s+=`\nå½“å‰å°è¯•åŠ è½½è·¯å¾„: ${e.modelUrl}`),new Error(s)}})}loadGLTF(e){return new Promise((t,s)=>{this.loader.load(e,e=>{t(e)},e=>{const t=e.total?e.loaded/e.total*100:0;t>0&&(t.toFixed(2),e.loaded,e.total)},e=>{s(e)})})}extractBones(e){const t=new Map;return e.traverse(e=>{e instanceof ve&&t.set(e.name,e)}),0===t.size&&e.traverse(e=>{e instanceof we&&e.skeleton&&e.skeleton.bones.forEach(e=>{t.set(e.name,e)})}),t}configureMaterials(e,t){const s=as(as({},this.defaultConfig),t);e.traverse(e=>{if(e instanceof je){const t=e.material.clone();t instanceof ke&&(t.roughness=s.roughness,t.metalness=s.metalness,s.skinColor&&t.color.set(s.skinColor),s.color&&t.color.set(s.color)),s.shadows&&(e.castShadow=!0,e.receiveShadow=!0),e.material=t}})}optimizeModel(e){e.traverse(e=>{e instanceof je&&(e.geometry&&(e.geometry.computeBoundingSphere(),e.geometry.computeBoundingBox(),e.geometry.index||(e.geometry=e.geometry.toNonIndexed())),e.material instanceof Ne&&(e.material.needsUpdate=!0))}),e.scale.set(1,1,1),e.position.set(0,0,0),e.rotation.set(0,0,0)}clearCache(){this.modelCache.forEach(e=>{e.mixer.stopAllAction(),e.scene.traverse(e=>{e instanceof je&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())})}),this.modelCache.clear()}getCachedModel(e){return this.modelCache.get(e)}preloadModels(e){return rs(this,null,function*(){yield Promise.all(e.map(e=>this.loadModel(e)))})}createAnimationClip(e,t){const s=[];return Object.entries(t).forEach(([t,a])=>{e.get(t)&&s.push(...a)}),new Ce("gesture",s.length,s)}setBonePose(e,t){Object.entries(t).forEach(([t,s])=>{const a=e.get(t);a&&(s.position&&a.position.copy(s.position),s.rotation&&a.quaternion.copy(s.rotation),s.scale&&a.scale.copy(s.scale),a.updateMatrix())})}resetBones(e){e.forEach(e=>{e.position.set(0,0,0),e.quaternion.set(0,0,0,1),e.scale.set(1,1,1),e.updateMatrix()})}},ns={modelUrl:"/models/hand.glb",color:"#e8b89d",skinColor:"#f5deb3",shadows:!0,roughness:.7,metalness:.1,dracoPath:"/draco/"};var ls=(e=>(e.IDLE="idle",e.PLAYING="playing",e.PAUSED="paused",e.TRANSITIONING="transitioning",e))(ls||{});const os=new class{constructor(){this.mixer=null,this.currentAction=null,this.queue=[],this.state="idle",this.playbackSpeed=1,this.isPaused=!1,this.isLooping=!1,this.onCompleteCallbacks=[],this.onProgressCallbacks=[],this.startTime=0,this.pausedTime=0,this.currentTime=0,this.actionDuration=0,this.lastFrameTime=0}setMixer(e){this.mixer=e,this.state="idle"}addToQueue(e,t={},s=!0,a=.3){var r,i,n,l,o;const c={speed:null!=(r=t.speed)?r:1,smoothness:null!=(i=t.smoothness)?i:.8,loop:null!=(n=t.loop)&&n,easeIn:null==(l=t.easeIn)||l,easeOut:null==(o=t.easeOut)||o};this.queue.push({action:e,params:c,transition:s,transitionDuration:a}),"idle"===this.state&&this.playNext()}playNext(){if(0===this.queue.length)return this.state="idle",void(this.currentAction=null);const e=this.queue.shift(),{action:t,params:s,transition:a,transitionDuration:r}=e;this.playAction(t,s,a,r)}playAction(e,t,s=!0,a=.3){if(!this.mixer)return;this.state="transitioning",this.currentTime=0,this.actionDuration=e.duration/t.speed,this.startTime=performance.now(),this.lastFrameTime=this.startTime,this.isPaused=!1,this.isLooping=t.loop;const r=this.createClipFromAction(e),i=this.mixer.clipAction(r);this.currentAction&&s&&(this.currentAction.fadeOut(a),i.fadeIn(a)),t.loop?i.setLoop(Pe,1/0):i.setLoop(Ie),i.setEffectiveTimeScale(t.speed),i.enabled=!0,i.clampWhenFinished=!t.loop,this.currentAction&&this.currentAction.stop(),this.currentAction=i,this.currentAction.play(),this.state="playing",this.notifyProgress({currentAction:e.id,progress:0,remainingTime:this.actionDuration,totalTime:this.actionDuration,queueLength:this.queue.length})}createClipFromAction(e){const t=[],s=e.duration,a=["_01","_02","_03"];return["thumb","index","middle","ring","little"].forEach(e=>{a.forEach(a=>{const r=`${e}${a}`;t.push(new Me(`${r}.quaternion`,[0,s/2,s],[0,0,0,1,.5,.5,.5,.5,0,0,0,1]))})}),t.push(new Me("wrist.quaternion",[0,s/2,s],[0,0,0,1,0,0,.5,.866,0,0,0,1])),t.push(new Fe("wrist.position",[0,s/2,s],[0,0,0,0,.5,0,0,0,0])),new Ce(e.id,s,t)}update(e){if(this.mixer&&this.currentAction&&!this.isPaused&&"playing"===this.state){this.mixer.update(e*this.playbackSpeed),this.currentTime+=e*this.playbackSpeed;const t=Math.min(this.currentTime/this.actionDuration,1);this.notifyProgress({currentAction:this.currentAction.getClip().name,progress:t,remainingTime:this.actionDuration-this.currentTime,totalTime:this.actionDuration,queueLength:this.queue.length}),!this.isLooping&&t>=1&&this.onActionComplete()}}onActionComplete(){var e;const t=(null==(e=this.currentAction)?void 0:e.getClip().name)||"";this.onCompleteCallbacks.forEach(e=>e(t)),this.queue.length>0?this.playNext():this.state="idle"}pause(){"playing"===this.state&&(this.isPaused=!0,this.pausedTime=performance.now(),this.state="paused",this.currentAction&&(this.currentAction.paused=!0))}resume(){"paused"===this.state&&(this.isPaused=!1,this.lastFrameTime=performance.now(),this.state="playing",this.currentAction&&(this.currentAction.paused=!1))}stop(){this.currentAction&&(this.currentAction.stop(),this.currentAction=null),this.queue=[],this.state="idle",this.currentTime=0,this.isPaused=!1,this.isLooping=!1}seekTo(e){this.currentAction&&(this.currentTime=Math.max(0,Math.min(e,this.actionDuration)),this.currentAction.time=this.currentTime,this.notifyProgress({currentAction:this.currentAction.getClip().name,progress:this.currentTime/this.actionDuration,remainingTime:this.actionDuration-this.currentTime,totalTime:this.actionDuration,queueLength:this.queue.length}))}setPlaybackSpeed(e){if(this.playbackSpeed=Math.max(.1,Math.min(e,3)),this.currentAction){this.currentAction.setEffectiveTimeScale(this.playbackSpeed);const e=this.actionDuration*(this.currentTime/this.actionDuration);this.actionDuration=e/this.playbackSpeed}}getState(){return this.state}getPlaybackSpeed(){return this.playbackSpeed}isPausedState(){return this.isPaused}isLoopingState(){return this.isLooping}getCurrentAction(){return this.currentAction}getQueueLength(){return this.queue.length}clearQueue(){this.queue=[]}onComplete(e){this.onCompleteCallbacks.push(e)}removeCompleteCallback(e){const t=this.onCompleteCallbacks.indexOf(e);t>-1&&this.onCompleteCallbacks.splice(t,1)}onProgress(e){this.onProgressCallbacks.push(e)}removeProgressCallback(e){const t=this.onProgressCallbacks.indexOf(e);t>-1&&this.onProgressCallbacks.splice(t,1)}notifyProgress(e){this.onProgressCallbacks.forEach(t=>t(e))}dispose(){this.stop(),this.onCompleteCallbacks=[],this.onProgressCallbacks=[],this.mixer=null}};function cs(e,t,s,a,r){return{finger:e,angles:{base:t,middle:s,distal:a},state:r}}function ds(e,t,s=1){return{rotation:new De(...e),position:new Ae(...t),openness:s}}const hs=[{id:"æ‰‹æŒ",name:"æ‰‹æŒ",description:"æ‰€æœ‰æ‰‹æŒ‡å®Œå…¨ä¼¸å±•ï¼Œæ‰‹æŒå¹³æ•´",category:"finger_basics",fingerPoses:[cs("thumb",0,0,0,"extended"),cs("index",0,0,0,"extended"),cs("middle",0,0,0,"extended"),cs("ring",0,0,0,"extended"),cs("little",0,0,0,"extended")],palmPose:ds([0,0,0,1],[0,0,0],1),tags:["åŸºç¡€","äº”æŒ‡"],duration:1,keyframes:30,difficulty:1},{id:"æ‹³å¤´",name:"æ‹³å¤´",description:"æ‰€æœ‰æ‰‹æŒ‡å®Œå…¨å¼¯æ›²ï¼Œæ¡æˆæ‹³å¤´",category:"grip",fingerPoses:[cs("thumb",45,60,45,"folded"),cs("index",90,90,90,"folded"),cs("middle",90,90,90,"folded"),cs("ring",90,90,90,"folded"),cs("little",90,90,90,"folded")],palmPose:ds([0,0,0,1],[0,0,0],0),tags:["æ¡åŠ›","äº”æŒ‡"],duration:.8,keyframes:24,difficulty:1},{id:"okæ‰‹åŠ¿",name:"OKæ‰‹åŠ¿",description:"æ‹‡æŒ‡å’Œé£ŸæŒ‡å½¢æˆåœ†åœˆï¼Œå…¶ä»–æ‰‹æŒ‡ä¼¸å±•",category:"combination",fingerPoses:[cs("thumb",30,45,30,"bent"),cs("index",30,45,30,"bent"),cs("middle",0,0,0,"extended"),cs("ring",0,0,0,"extended"),cs("little",0,0,0,"extended")],palmPose:ds([0,0,0,1],[0,0,0],.8),tags:["æ‰‹åŠ¿","ç»„åˆ"],duration:1,keyframes:30,difficulty:2},{id:"ç«–å¤§æ‹‡æŒ‡",name:"ç«–å¤§æ‹‡æŒ‡",description:"æ‹‡æŒ‡å‘ä¸Šç«–èµ·ï¼Œå…¶ä»–æ‰‹æŒ‡å¼¯æ›²",category:"combination",fingerPoses:[cs("thumb",0,0,0,"extended"),cs("index",90,90,90,"folded"),cs("middle",90,90,90,"folded"),cs("ring",90,90,90,"folded"),cs("little",90,90,90,"folded")],palmPose:ds([0,0,0,1],[0,0,0],.2),tags:["æ‰‹åŠ¿","æ‹‡æŒ‡"],duration:1,keyframes:30,difficulty:1},{id:"æŒ‡å‘",name:"æŒ‡å‘",description:"é£ŸæŒ‡å‘ä¸Šä¼¸å±•ï¼Œå…¶ä»–æ‰‹æŒ‡å¼¯æ›²",category:"combination",fingerPoses:[cs("thumb",90,90,90,"folded"),cs("index",0,0,0,"extended"),cs("middle",90,90,90,"folded"),cs("ring",90,90,90,"folded"),cs("little",90,90,90,"folded")],palmPose:ds([0,0,0,1],[0,0,0],.2),tags:["æ‰‹åŠ¿","é£ŸæŒ‡"],duration:1,keyframes:30,difficulty:1},{id:"Vå­—æ‰‹åŠ¿",name:"Vå­—æ‰‹åŠ¿",description:"é£ŸæŒ‡å’Œä¸­æŒ‡ä¼¸å±•å‘ˆVå½¢ï¼Œå…¶ä»–æ‰‹æŒ‡å¼¯æ›²",category:"combination",fingerPoses:[cs("thumb",90,90,90,"folded"),cs("index",0,0,0,"extended"),cs("middle",0,0,0,"extended"),cs("ring",90,90,90,"folded"),cs("little",90,90,90,"folded")],palmPose:ds([0,0,0,1],[0,0,0],.4),tags:["æ‰‹åŠ¿","èƒœåˆ©"],duration:1,keyframes:30,difficulty:2},{id:"æ‰‹æŒå‘å·¦",name:"æ‰‹æŒå‘å·¦",description:"æ‰‹æŒæœå‘å·¦æ–¹",category:"palm",fingerPoses:[cs("thumb",0,0,0,"extended"),cs("index",0,0,0,"extended"),cs("middle",0,0,0,"extended"),cs("ring",0,0,0,"extended"),cs("little",0,0,0,"extended")],palmPose:ds([0,.707,0,.707],[0,0,0],1),tags:["æ–¹å‘","æ‰‹æŒ"],duration:1,keyframes:30,difficulty:1},{id:"æ‰‹æŒå‘å³",name:"æ‰‹æŒå‘å³",description:"æ‰‹æŒæœå‘å³æ–¹",category:"palm",fingerPoses:[cs("thumb",0,0,0,"extended"),cs("index",0,0,0,"extended"),cs("middle",0,0,0,"extended"),cs("ring",0,0,0,"extended"),cs("little",0,0,0,"extended")],palmPose:ds([0,-.707,0,.707],[0,0,0],1),tags:["æ–¹å‘","æ‰‹æŒ"],duration:1,keyframes:30,difficulty:1},{id:"æŒ¥æ‰‹",name:"æŒ¥æ‰‹",description:"æ‰‹æŒå·¦å³æŒ¥æ‰‹è‡´æ„",category:"dynamic",fingerPoses:[cs("thumb",30,30,30,"bent"),cs("index",0,0,0,"extended"),cs("middle",0,0,0,"extended"),cs("ring",0,0,0,"extended"),cs("little",0,0,0,"extended")],palmPose:ds([0,0,0,1],[0,0,0],1),tags:["åŠ¨æ€","é—®å€™"],duration:2,keyframes:60,difficulty:2},{id:"æ¡æ‰‹",name:"æ¡æ‰‹",description:"å¼ å¼€æ‰‹æŒç„¶åæ¡ç´§",category:"grip",fingerPoses:[cs("thumb",45,60,45,"folded"),cs("index",90,90,90,"folded"),cs("middle",90,90,90,"folded"),cs("ring",90,90,90,"folded"),cs("little",90,90,90,"folded")],palmPose:ds([0,0,0,1],[0,0,0],0),tags:["æ¡åŠ›","åŠ¨æ€"],duration:1.5,keyframes:45,difficulty:2}];function ms(e){return hs.find(t=>t.id===e)}const xs=({model:e,action:a,onActionComplete:r})=>{const i=t.useRef(null),[n,l]=t.useState(!1);return t.useEffect(()=>{os.setMixer(e.mixer),l(!0);const t=e=>{e===a.id&&r&&r()};return os.onComplete(t),()=>{os.removeCompleteCallback(t)}},[e,a,r]),t.useEffect(()=>{os.addToQueue(a)},[a]),de((e,t)=>{os.update(t)}),s.jsx("group",{ref:i,children:s.jsx("primitive",{object:e.scene})})},us=({message:e="åŠ è½½ä¸­..."})=>s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:e})]})}),ps=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17]],gs=({landmarks:e,action:a,color:r="#4f46e5"})=>{const i=t.useRef(null);de(e=>{i.current&&(i.current.rotation.y=.1*e.clock.elapsedTime)});if(e&&e.length>0)return s.jsx("group",{ref:i,children:e.map((e,t)=>{const a=e.points.map(e=>{const t=(s=e.x,a=e.y,r=e.z,{x:4*(s-.5),y:4*-(a-.5),z:2*r});var s,a,r;return[t.x,t.y,t.z]});return s.jsxs("group",{children:[ps.map(([e,i],n)=>{const l=a[e],o=a[i];return s.jsx(he,{points:[l,o],color:r,lineWidth:.02,opacity:.8},`line-${t}-${n}`)}),a.map((e,a)=>s.jsx(me,{position:e,args:[0===a?.08:.04,32,32],children:s.jsx("meshStandardMaterial",{color:0===a?"#ff6b6b":r,emissive:0===a?"#ff6b6b":r,emissiveIntensity:.3})},`point-${t}-${a}`))]},t)})});if(a){const e=(e=>{const t=Array.from({length:21},(e,t)=>{const s=t/20*Math.PI*2;return[.5*Math.cos(s),2*(t/20-.5),.5*Math.sin(s)]});return"æ‹³å¤´"===e?t.map(([e,t,s])=>[.3*e,.3*t,.3*s]):"okæ‰‹åŠ¿"===e?t.map(([e,t,s],a)=>4===a||8===a?[.2*e,.2*t,.2*s]:[.7*e,.7*t,.7*s]):t})(a.id);return s.jsxs("group",{ref:i,children:[ps.map(([t,a],i)=>{const n=e[t],l=e[a];return s.jsx(he,{points:[n,l],color:r,lineWidth:.02,opacity:.8},`gesture-line-${i}`)}),e.map((e,t)=>s.jsx(me,{position:e,args:[0===t?.08:.04,32,32],children:s.jsx("meshStandardMaterial",{color:0===t?"#ff6b6b":r,emissive:0===t?"#ff6b6b":r,emissiveIntensity:.3})},`gesture-point-${t}`)),s.jsxs("mesh",{position:[0,1.5,0],children:[s.jsx("sphereGeometry",{args:[.02,16,16]}),s.jsx("meshBasicMaterial",{color:"#4ecdc4"})]})]})}const n=Array.from({length:21},(e,t)=>{const s=t/20*Math.PI*2;return[.6*Math.cos(s),2.5*(t/20-.5),.6*Math.sin(s)]});return s.jsxs("group",{ref:i,children:[ps.map(([e,t],a)=>{const i=n[e],l=n[t];return s.jsx(he,{points:[i,l],color:r,lineWidth:.02,opacity:.7},`idle-line-${a}`)}),n.map((e,t)=>s.jsx(me,{position:e,args:[0===t?.08:.04,32,32],children:s.jsx("meshStandardMaterial",{color:0===t?"#ff6b6b":r,emissive:0===t?"#ff6b6b":r,emissiveIntensity:.2})},`idle-point-${t}`))]})},bs=({currentAction:e,isPlaying:a,playbackSpeed:r,progress:i,onPlayPause:n,onStop:l,onSpeedChange:o,onSeek:c,onActionSelect:d,isFallbackMode:h,onSwitchMode:m})=>{const[x,u]=t.useState(r);t.useEffect(()=>{u(r)},[r]);return s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:[void 0!==h&&s.jsx("div",{className:"mb-3 max-w-md mx-auto",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 bg-blue-500/20 backdrop-blur-sm rounded-lg px-4 py-2",children:[s.jsx("span",{className:"text-blue-400 text-sm font-medium",children:h?"âš¡ å…³é”®ç‚¹å¯è§†åŒ–æ¨¡å¼":"ğŸ¨ 3D æ¨¡å‹æ¨¡å¼"}),m&&s.jsx("button",{onClick:m,className:"text-blue-400 hover:text-blue-300 text-xs underline",children:"åˆ‡æ¢æ¨¡å¼"})]})}),s.jsxs("div",{className:"mb-4 max-w-md mx-auto",children:[s.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"é€‰æ‹©æ‰‹è¯­åŠ¨ä½œ"}),s.jsxs("select",{value:(null==e?void 0:e.id)||"",onChange:e=>d(e.target.value),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"-- é€‰æ‹©åŠ¨ä½œ --"}),hs.map(e=>s.jsxs("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]}),!h&&s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:e=>{const t=parseFloat(e.target.value);c(t)},className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer accent-blue-500"}),s.jsxs("div",{className:"flex justify-between text-xs text-white/70 mt-1",children:[s.jsxs("span",{children:[(100*i).toFixed(0),"%"]}),s.jsx("span",{children:(null==e?void 0:e.name)||"æœªé€‰æ‹©"})]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[s.jsx("button",{onClick:n,className:"w-14 h-14 rounded-full bg-blue-500 hover:bg-blue-600 text-white flex items-center justify-center transition-colors shadow-lg",children:a?s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):s.jsx("svg",{className:"w-6 h-6 ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:l,className:"w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 text-white flex items-center justify-center transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("span",{className:"text-white text-sm",children:"é€Ÿåº¦:"}),s.jsx("input",{type:"range",min:"0.1",max:"3.0",step:"0.1",value:x,onChange:e=>{const t=parseFloat(e.target.value);u(t),o(t)},className:"w-24 h-2 bg-white/20 rounded-lg appearance-none cursor-pointer accent-blue-500"}),s.jsxs("span",{className:"text-white text-sm w-12",children:[x.toFixed(1),"x"]})]})]})]})})]})},fs=({actionId:e="æ‰‹æŒ",autoPlay:a=!0,showControls:r=!0,showStats:i=!1,cameraPosition:n=[0,0,5],lightIntensity:l=1,backgroundColor:o="#1a1a2e",useEnvironment:c=!0,className:d="",landmarks:h=[],useFallbackMode:m=!1})=>{var x;const[u,p]=t.useState(null),[g,b]=t.useState(!0),[f,y]=t.useState(null),[v,w]=t.useState(null),[j,k]=t.useState(null),[N,C]=t.useState(m);t.useEffect(()=>{if(N)return b(!1),void y(null);var e,t,s;e=void 0,t=null,s=function*(){try{b(!0),y(null);const e=yield is.loadModel(ns);p(e),b(!1)}catch(e){C(!0),b(!1),y(null)}},new Promise((a,r)=>{var i=e=>{try{l(s.next(e))}catch(t){r(t)}},n=e=>{try{l(s.throw(e))}catch(t){r(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((s=s.apply(e,t)).next())})},[N]),t.useEffect(()=>{if(e){const t=ms(e);w(t||hs[0])}},[e]),t.useEffect(()=>{if(N)return;const e=e=>{k(e)};return os.onProgress(e),()=>{os.removeProgressCallback(e)}},[N]);const S=t.useCallback(()=>{os.getState()===ls.PAUSED?os.resume():os.getState()===ls.PLAYING&&os.pause()},[]),T=t.useCallback(()=>{os.stop()},[]),P=t.useCallback(e=>{os.setPlaybackSpeed(e)},[]),I=t.useCallback(e=>{if(void 0!==e){const t=e,s=t||1;os.seekTo(t*s)}},[]),M=t.useCallback(e=>{const t=ms(e);t&&(w(t),N||(os.stop(),os.addToQueue(t)))},[N]),F=!N&&os.getState()===ls.PLAYING,A=null!=(x=null==j?void 0:j.progress)?x:0;return g?s.jsx("div",{className:`relative w-full h-full ${d}`,children:s.jsx(us,{message:"åˆå§‹åŒ–å¯è§†åŒ–ç»„ä»¶..."})}):s.jsxs("div",{className:`relative w-full h-full ${d}`,children:[s.jsxs(re,{shadows:!0,dpr:[1,2],camera:{position:n,fov:50},gl:{antialias:!0,alpha:!0},children:[i&&s.jsx(ie,{}),c&&s.jsx(ne,{preset:"city"}),s.jsx("color",{attach:"background",args:[o]}),s.jsx(le,{makeDefault:!0,position:n,fov:50}),s.jsx(oe,{enableZoom:!0,enablePan:!0,enableRotate:!0,minDistance:2,maxDistance:10,minPolarAngle:0,maxPolarAngle:Math.PI}),s.jsx("ambientLight",{intensity:.5*l}),s.jsx("directionalLight",{position:[10,10,5],intensity:l,castShadow:!0,"shadow-mapSize-width":[1024,2048],"shadow-mapSize-height":[1024,2048],"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}),s.jsx("directionalLight",{position:[-10,-10,-5],intensity:.5*l}),s.jsx("pointLight",{position:[0,5,0],intensity:.5,color:"#fff"}),s.jsx(ce,{args:[10,10],cellColor:"#4f46e5",sectionColor:"#6366f1",cellSize:1,sectionSize:5,position:[0,-2,0],fadeDistance:15,infiniteGrid:!0}),s.jsx(t.Suspense,{fallback:null,children:N?s.jsx(gs,{landmarks:h,action:v||void 0}):u&&v&&s.jsx(xs,{model:u,action:v,onActionComplete:()=>{}})})]}),r&&v&&s.jsx(bs,{currentAction:v,isPlaying:F,playbackSpeed:os.getPlaybackSpeed(),progress:A,onPlayPause:S,onStop:T,onSpeedChange:P,onSeek:I,onActionSelect:M,isFallbackMode:N,onSwitchMode:()=>C(!N)}),s.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${F||N?"bg-green-500":"bg-yellow-500"} animate-pulse`}),s.jsx("span",{className:"text-white text-sm font-medium bg-black/50 backdrop-blur-sm px-3 py-1 rounded-lg",children:N?"å¯è§†åŒ–ä¸­":F?"æ’­æ”¾ä¸­":"æš‚åœ"})]}),i&&!N&&s.jsxs("div",{className:"absolute top-4 right-4 text-white text-xs bg-black/50 backdrop-blur-sm px-2 py-1 rounded",children:["FPS: ",Math.round(1/((null==j?void 0:j.remainingTime)||1/60))||60]})]})},ys=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17]],vs=({landmarks:e,color:a,showSkeleton:r,showPoints:i})=>{const n=t.useRef(null);de(e=>{n.current&&(n.current.rotation.y=.2*e.clock.elapsedTime)});const l=e.points.map(e=>{const t=(s=e.x,a=e.y,r=e.z,{x:4*(s-.5),y:4*-(a-.5),z:2*r});var s,a,r;return[t.x,t.y,t.z]});return s.jsxs("group",{ref:n,children:[r&&ys.map(([e,t],r)=>{const i=l[e],n=l[t];return s.jsx(he,{points:[i,n],color:a,lineWidth:.02,opacity:.8},r)}),i&&l.map((e,t)=>s.jsx(me,{position:e,radius:0===t?.08:.04,args:[0===t?.08:.04,32,32],children:s.jsx("meshStandardMaterial",{color:0===t?"#ff6b6b":a,emissive:0===t?"#ff6b6b":a,emissiveIntensity:.3})},t)),s.jsx(me,{position:l[0],radius:.1,args:[.1,32,32],children:s.jsx("meshStandardMaterial",{color:"#4ecdc4",emissive:"#4ecdc4",emissiveIntensity:.3})})]})},ws=({landmarks:e,color:t,showSkeleton:a,showPoints:r})=>s.jsxs(re,{camera:{position:[0,0,5],fov:50},className:"w-full h-full",children:[s.jsx("ambientLight",{intensity:.5}),s.jsx("directionalLight",{position:[10,10,5],intensity:1}),s.jsx("directionalLight",{position:[-10,-10,-5],intensity:.5}),s.jsx("color",{attach:"background",args:["#1a1a2e"]}),e.map((e,i)=>s.jsx(vs,{landmarks:e,color:t,showSkeleton:a,showPoints:r},i)),s.jsx(oe,{enableZoom:!0,enablePan:!0,enableRotate:!0,minDistance:2,maxDistance:10}),s.jsx("gridHelper",{args:[10,10,"#2d2d44","#2d2d44"],position:[0,-2,0]})]}),js=({landmarks:e=[],width:a=640,height:r=480,color:i="#4f46e5"})=>{const n=t.useRef(null);return t.useEffect(()=>{const t=n.current;if(!t)return;const s=t.getContext("2d");s&&(s.clearRect(0,0,a,r),s.fillStyle="#1a1a2e",s.fillRect(0,0,a,r),e&&e.length>0&&e.forEach(e=>{const t=e.points.map(e=>({x:e.x*a,y:e.y*r}));s.strokeStyle=i,s.lineWidth=3,s.lineCap="round",ys.forEach(([e,a])=>{const r=t[e],i=t[a];s.beginPath(),s.moveTo(r.x,r.y),s.lineTo(i.x,i.y),s.stroke()}),t.forEach((e,t)=>{s.beginPath(),s.arc(e.x,e.y,0===t?8:5,0,2*Math.PI),s.fillStyle=0===t?"#4ecdc4":i,s.fill(),s.strokeStyle="#ffffff",s.lineWidth=2,s.stroke()})}))},[e,a,r,i]),s.jsx("canvas",{ref:n,width:a,height:r,className:"w-full h-auto rounded-lg"})},ks=({landmarks:e=[],showSkeleton:a=!0,showPoints:r=!0,color:i="#4f46e5",className:n="",viewMode:l="2d",actionId:o="æ‰‹æŒ",autoPlay:c=!0})=>{const[d,h]=t.useState(l);return s.jsxs("div",{className:`relative w-full h-full ${n}`,children:[s.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2",children:[s.jsx("button",{onClick:()=>h("2d"),className:"px-4 py-2 rounded-lg transition-all "+("2d"===d?"bg-blue-500 text-white shadow-lg":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30"),children:"2D è§†å›¾"}),s.jsx("button",{onClick:()=>h("3d"),className:"px-4 py-2 rounded-lg transition-all "+("3d"===d?"bg-blue-500 text-white shadow-lg":"bg-white/20 backdrop-blur-sm text-white hover:bg-white/30"),children:"3D è§†å›¾"})]}),"2d"===d&&e.length>0&&s.jsx(ws,{landmarks:e,color:i,showSkeleton:a,showPoints:r}),"2d"===d&&e.length>0&&s.jsx("div",{className:"absolute bottom-4 left-4 right-4 pointer-events-none",children:s.jsx(js,{landmarks:e,width:320,height:240,color:i})}),"3d"===d&&s.jsx(fs,{actionId:o,autoPlay:c,showControls:!0,className:"w-full h-full"}),"2d"===d&&e.length>0&&s.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm rounded-lg p-4 text-white text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full bg-[#4ecdc4]"}),s.jsx("span",{children:"æ‰‹è…•"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:i}}),s.jsx("span",{children:"å…³é”®ç‚¹"})]})]}),0===e.length&&"2d"===d&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),s.jsx("p",{className:"text-lg font-medium",children:"ç­‰å¾…æ‰‹éƒ¨è¯†åˆ«..."}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"è¯·ç¡®ä¿æ‘„åƒå¤´æ­£å¸¸å·¥ä½œ"})]})})]})};function Ns(e,t=2){return`${(100*e).toFixed(t)}%`}function Cs(e){const t=Date.now()-e,s=6e4,a=36e5,r=24*a,i=30*r,n=12*i;return t<s?"åˆšåˆš":t<a?`${Math.floor(t/s)}åˆ†é’Ÿå‰`:t<r?`${Math.floor(t/a)}å°æ—¶å‰`:t<i?`${Math.floor(t/r)}å¤©å‰`:t<n?`${Math.floor(t/i)}ä¸ªæœˆå‰`:`${Math.floor(t/n)}å¹´å‰`}function Ss(e){return{zh:"ä¸­æ–‡",en:"English",ja:"æ—¥æœ¬èª",ko:"í•œêµ­ì–´",es:"EspaÃ±ol",fr:"FranÃ§ais",de:"Deutsch",ru:"Ğ ÑƒÑÑĞºĞ¸Ğ¹",ar:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",pt:"PortuguÃªs",it:"Italiano",hi:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",sign:"æ‰‹è¯­"}[e]||e}function Ts(e){return{happy:{label:"å¼€å¿ƒ",icon:"ğŸ˜Š"},sad:{label:"æ‚²ä¼¤",icon:"ğŸ˜¢"},angry:{label:"æ„¤æ€’",icon:"ğŸ˜ "},neutral:{label:"å¹³é™",icon:"ğŸ˜"},surprised:{label:"æƒŠè®¶",icon:"ğŸ˜²"},fearful:{label:"ææƒ§",icon:"ğŸ˜¨"}}[e]||{label:e,icon:"ğŸ˜"}}function Ps(e){return Ts(e).label}const Is=({title:e,content:t,confidence:a,timestamp:r,success:i=!0,error:n,copyable:l=!0,favoritable:o=!1,isFavorite:c=!1,onCopy:d,onFavorite:h,onShare:m,onViewDetails:x,onDelete:u,className:p=""})=>{return s.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`\n        bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6\n        border ${i?"border-green-200 dark:border-green-800":"border-red-200 dark:border-red-800"}\n        ${p}\n      `,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[i?s.jsx(ge.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring"},className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:s.jsx(L,{className:"w-6 h-6 text-green-500"})}):s.jsx(ge.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring"},className:"w-10 h-10 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center",children:s.jsx(Q,{className:"w-6 h-6 text-red-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e}),r&&s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[s.jsx(xe,{className:"w-3 h-3 mr-1"}),Cs(r)]})]})]}),void 0!==a&&i&&s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-sm font-semibold "+(g=a,g>=.9?"text-green-500":g>=.7?"text-blue-500":g>=.5?"text-yellow-500":"text-red-500"),children:Ns(a)}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:(e=>e>=.9?"ç½®ä¿¡åº¦æé«˜":e>=.7?"ç½®ä¿¡åº¦é«˜":e>=.5?"ç½®ä¿¡åº¦ä¸­ç­‰":"ç½®ä¿¡åº¦è¾ƒä½")(a)})]})]}),s.jsx("div",{className:"mb-4",children:i?s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4",children:s.jsx("p",{className:"text-gray-900 dark:text-white text-lg leading-relaxed",children:t})}):s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:n||"å¤„ç†å¤±è´¥ï¼Œè¯·é‡è¯•"})})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[l&&i&&s.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{return e=void 0,s=null,a=function*(){try{yield navigator.clipboard.writeText(t),null==d||d()}catch(e){}},new Promise((t,r)=>{var i=e=>{try{l(a.next(e))}catch(t){r(t)}},n=e=>{try{l(a.throw(e))}catch(t){r(t)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,n);l((a=a.apply(e,s)).next())});var e,s,a},className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"å¤åˆ¶å†…å®¹",children:s.jsx(ue,{className:"w-5 h-5"})}),o&&i&&s.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,className:`p-2 rounded-lg transition-colors ${c?"text-yellow-500 hover:text-yellow-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"} hover:bg-gray-100 dark:hover:bg-gray-700`,title:c?"å–æ¶ˆæ”¶è—":"æ·»åŠ æ”¶è—",children:s.jsx(H,{className:"w-5 h-5 "+(c?"fill-current":"")})}),m&&i&&s.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:m,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"åˆ†äº«",children:s.jsx(pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[x&&i&&s.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x,className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:"æŸ¥çœ‹è¯¦æƒ…"}),u&&s.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:"px-4 py-2 text-sm font-medium text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"åˆ é™¤"})]})]})]});var g},Ms=({data:e,color:a="#4f46e5",height:r=100,showLabels:i=!1,className:n=""})=>{const l=t.useRef(null);t.useEffect(()=>{const t=l.current;if(!t)return;const s=t.getContext("2d");if(!s)return;let i;i=Array.isArray(e)?e:e.amplitudes;const n=window.devicePixelRatio||1,o=t.getBoundingClientRect();t.width=o.width*n,t.height=o.height*n,s.scale(n,n),s.clearRect(0,0,o.width,o.height);const c=s.createLinearGradient(0,0,0,o.height);c.addColorStop(0,a),c.addColorStop(.5,a),c.addColorStop(1,a);const d=o.width/i.length,h=Math.max(1,.2*d),m=d-h;i.forEach((e,t)=>{const a=e/255*r,i=t*d,n=(o.height-a)/2;s.fillStyle=c;const l=Math.min(m/2,a/2);s.beginPath(),s.moveTo(i+l,n),s.lineTo(i+m-l,n),s.quadraticCurveTo(i+m,n,i+m,n+l),s.lineTo(i+m,n+a-l),s.quadraticCurveTo(i+m,n+a,i+m-l,n+a),s.lineTo(i+l,n+a),s.quadraticCurveTo(i,n+a,i,n+a-l),s.lineTo(i,n+l),s.quadraticCurveTo(i,n,i+l,n),s.closePath(),s.fill()}),s.strokeStyle="rgba(0, 0, 0, 0.1)",s.lineWidth=1,s.beginPath(),s.moveTo(0,o.height/2),s.lineTo(o.width,o.height/2),s.stroke()},[e,a,r]);const o=Array.isArray(e)?0:e.duration;return Array.isArray(e)||e.sampleRate,s.jsxs("div",{className:`relative ${n}`,children:[s.jsx("canvas",{ref:l,style:{height:`${r}px`},className:"w-full"}),i&&s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"0:00"}),s.jsx("span",{children:Array.isArray(e)?"æ³¢å½¢æ•°æ®":`${o.toFixed(1)}s`})]})]})};export{Zt as C,et as E,st as F,tt as H,at as P,Is as R,ks as S,it as T,Ms as W,_e as a,Ss as b,Le as c,He as d,Ps as f,Ts as g};
