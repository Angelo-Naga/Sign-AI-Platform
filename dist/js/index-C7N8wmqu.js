import{r as e,j as t,aF as i,aG as a,aH as r,u as s,aI as n,R as o,aJ as c,aK as l}from"./react-vendor-DUSrwrz2.js";import{q as d,m,A as h}from"./vendor-mvPEyPB5.js";import{c as p,d as u,a as g}from"./components-BbI5_Uv6.js";import{H as x,S as f,V as y,a as b,T as j}from"./pages-1htvphxR.js";import"./three-vendor-DubhnhXN.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var v=Object.defineProperty,w=Object.defineProperties,k=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,S=(e,t,i)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,E=(e,t)=>{for(var i in t||(t={}))L.call(t,i)&&S(e,i,t[i]);if(N)for(var i of N(t))O.call(t,i)&&S(e,i,t[i]);return e};const T=d(e=>({settings:{theme:"auto",language:"zh",microphoneId:"",cameraId:"",notifications:!0,autoSave:!0,soundEffects:!0},updateSettings:t=>e(e=>({settings:E(E({},e.settings),t)})),theme:"auto",toggleTheme:()=>e(e=>({theme:"dark"===e.theme?"light":(e.theme,"dark")})),loading:!1,setLoading:t=>e({loading:t}),notifications:[],addNotification:t=>{const i=(a=E({},t),r={id:`notification-${Date.now()}-${Math.random()}`,timestamp:Date.now()},w(a,k(r)));var a,r;e(e=>({notifications:[i,...e.notifications]}))},removeNotification:t=>e(e=>({notifications:e.notifications.filter(e=>e.id!==t)})),clearNotifications:()=>e({notifications:[]})})),P=({children:e})=>{const i=s();return t.jsx(h,{mode:"wait",initial:!1,children:t.jsx(m.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.3,ease:[.4,0,.2,1]},className:"flex-1 min-h-0",children:e},i.pathname)})},I=({visible:e})=>e?t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm",children:t.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"text-center",children:[t.jsxs("div",{className:"relative w-16 h-16 mb-4",children:[t.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-4 border-purple-200 dark:border-purple-800"}),t.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-4 border-transparent border-t-purple-500 dark:border-t-purple-400"})]}),t.jsx(m.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-gray-600 dark:text-gray-400 font-medium",children:"加载中..."})]})}):null,M=()=>{const{notifications:e,removeNotification:i}=T(),a=e=>{switch(e){case"success":return"✓";case"warning":return"⚠";case"error":return"✕";default:return"ℹ"}},r=e=>{switch(e){case"success":return"bg-green-500 dark:bg-green-600";case"warning":return"bg-orange-500 dark:bg-orange-600";case"error":return"bg-red-500 dark:bg-red-600";default:return"bg-blue-500 dark:bg-blue-600"}};return t.jsx("div",{className:"fixed top-24 right-4 z-50 flex flex-col space-y-3 max-w-sm w-full",children:t.jsx(h,{mode:"popLayout",children:e.map(e=>t.jsx(m.div,{initial:{opacity:0,x:100,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.9},transition:{type:"spring",damping:25,stiffness:300},className:"relative",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsx("div",{className:`h-1 w-full ${r(e.type)}`}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:`flex-shrink-0 w-8 h-8 ${r(e.type)} rounded-lg flex items-center justify-center text-white font-bold`,children:a(e.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.message})]}),t.jsx(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(e.id),className:"flex-shrink-0 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"关闭通知",children:t.jsxs("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[t.jsx("path",{d:"M18 6L6 18",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M6 6L18 18",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),e.actionLink&&t.jsx(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:t.jsx("a",{href:e.actionLink,className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 font-medium",children:"查看详情 →"})})]}),t.jsx(m.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:5,ease:"linear"},onAnimationComplete:()=>i(e.id),className:`h-0.5 ${r(e.type)} opacity-50`})]})},e.id))})})},$=()=>{const{theme:s,toggleTheme:n,settings:o,updateSettings:c,loading:l,notifications:d}=T(),[m,h]=e.useState(!1),[v,w]=e.useState("light");e.useEffect(()=>{const e=()=>{const e=document.documentElement;let t="light";t="auto"===o.theme?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o.theme,w(t),e.classList.remove("light","dark"),e.classList.add(t)};e();const t=window.matchMedia("(prefers-color-scheme: dark)"),i=()=>{"auto"===o.theme&&e()};return t.addEventListener("change",i),()=>{t.removeEventListener("change",i)}},[o.theme]);const k=e.useCallback(()=>{n()},[n]);return t.jsxs("div",{className:`min-h-screen flex flex-col ${v}`,children:[t.jsx(I,{visible:l}),t.jsx(M,{}),t.jsx(p,{menuItems:[{id:"home",label:"首页",path:"/",icon:"Home"},{id:"sign",label:"手语识别",path:"/sign-recognition",icon:"Hand"},{id:"voice",label:"语音处理",path:"/voice-processing",icon:"Mic"},{id:"clone",label:"声音克隆",path:"/voice-cloning",icon:"UserPlus"},{id:"translation",label:"翻译",path:"/translation",icon:"Languages"}],theme:v,onThemeToggle:k,onOpenSettings:()=>h(!0)}),t.jsx("main",{className:"flex-1 min-h-0 relative",children:t.jsx(P,{children:t.jsxs(i,{children:[t.jsx(a,{path:"/",element:t.jsx(x,{})}),t.jsx(a,{path:"/sign-recognition",element:t.jsx(f,{})}),t.jsx(a,{path:"/voice-processing",element:t.jsx(y,{})}),t.jsx(a,{path:"/voice-cloning",element:t.jsx(b,{})}),t.jsx(a,{path:"/translation",element:t.jsx(j,{})}),t.jsx(a,{path:"*",element:t.jsx(r,{to:"/",replace:!0})})]})})}),t.jsx(u,{showBackToTop:!0}),t.jsx(g,{settings:o,onUpdate:c,isOpen:m,onClose:()=>h(!1)})]})},C=()=>{const e=document.getElementById("__loading__");e&&(e.style.opacity="0",setTimeout(()=>{e.remove()},300))};try{const e=document.getElementById("root");if(!e)throw new Error("未找到 #root 元素");n(e).render(t.jsx(o.StrictMode,{children:t.jsxs(c,{children:[t.jsx($,{}),t.jsx(l,{position:"top-right",reverseOrder:!1,gutter:8,containerStyle:{},toastOptions:{duration:4e3,style:{background:"white",color:"#374151",fontSize:"14px",fontWeight:"500",borderRadius:"12px",padding:"12px 16px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},success:{style:{background:"#10b981",color:"white"},iconTheme:{primary:"white",secondary:"#34d399"}},error:{style:{background:"#ef4444",color:"white"},iconTheme:{primary:"white",secondary:"#f87171"}},loading:{style:{background:"#6366f1",color:"white"}}}})]})})),setTimeout(()=>{C()},100)}catch(H){C()}window.addEventListener("error",e=>{C()}),window.addEventListener("unhandledrejection",e=>{C()});
